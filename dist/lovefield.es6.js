if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function h(a){return function(){return this[a]}}function m(a){return function(){return a}}var n,ca=this||self;function q(a){return void 0!==a}function da(a){return"string"==typeof a}function ea(){}
function fa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ha(a){return null!=a}function ia(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ja(a){return"function"==fa(a)}function ka(a){return a[la]||(a[la]=++na)}var la="closure_uid_"+(1E9*Math.random()>>>0),na=0;function oa(a,b,c){return a.call.apply(a.bind,arguments)}
function pa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(null,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function t(a,b){a=a.split(".");var c=ca;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&q(b)?c[d]=b:c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}}
function u(a,b){function c(){}c.prototype=b.prototype;a.eb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Yg=function(d,e,f){for(var g=Array(arguments.length-2),k=2;k<arguments.length;k++)g[k-2]=arguments[k];return b.prototype[e].apply(d,g)}};function sa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,sa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}u(sa,Error);sa.prototype.name="CustomError";var ta=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(da(a))return da(b)&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ua=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=da(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},va=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var c=
a.length,d=Array(c),e=da(a)?a.split(""):a,f=0;f<c;f++)f in e&&(d[f]=b.call(void 0,e[f],f,a));return d},wa=Array.prototype.reduce?function(a,b,c){return Array.prototype.reduce.call(a,b,c)}:function(a,b,c){var d=c;ua(a,function(e,f){d=b.call(void 0,d,e,f,a)});return d},xa=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=da(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a))return!0;return!1};
function ya(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function za(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Aa(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==fa(d))for(var e=0;e<d.length;e+=8192)for(var f=Aa.apply(null,ya(d,e,e+8192)),g=0;g<f.length;g++)b.push(f[g]);else b.push(d)}return b};function Ba(a,b){this.ug=100;this.Rf=a;this.Ng=b;this.md=0;this.cd=null}Ba.prototype.get=function(){if(0<this.md){this.md--;var a=this.cd;this.cd=a.next;a.next=null}else a=this.Rf();return a};Ba.prototype.put=function(a){this.Ng(a);this.md<this.ug&&(this.md++,a.next=this.cd,this.cd=a)};function Ca(a,b){this.tf=a===Da&&b||"";this.Af=Ea}Ca.prototype.toString=function(){return"Const{"+this.tf+"}"};var Ea={},Da={},Fa=new Ca(Da,"");function Ga(){}Ga.prototype.yb=function(){return this};(new Ga).yb("");function Ha(){this.gf="";this.wf=null;this.Bf=Ia}var Ia={};var Ja=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};
function Ka(a){var b=0;a=Ja(String(a)).split(".");for(var c=Ja("10").split("."),d=Math.max(a.length,c.length),e=0;0==b&&e<d;e++){var f=a[e]||"",g=c[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""];if(0==f[0].length&&0==g[0].length)break;b=La(0==f[1].length?0:parseInt(f[1],10),0==g[1].length?0:parseInt(g[1],10))||La(0==f[2].length,0==g[2].length)||La(f[2],g[2]);f=f[3];g=g[3]}while(0==b)}return b}function La(a,b){return a<b?-1:a>b?1:0};function Ma(){}Ma.prototype.yb=function(){return this};(new Ma).yb("");function Na(){}Na.prototype.yb=function(){return this};(new Na).yb("");var Oa;a:{var Pa=ca.navigator;if(Pa){var Ra=Pa.userAgent;if(Ra){Oa=Ra;break a}}Oa=""}function v(a){return-1!=Oa.indexOf(a)};function Sa(){return v("Safari")&&!(Ta()||v("Coast")||v("Opera")||v("Edge")||v("Edg/")||v("OPR")||v("Firefox")||v("FxiOS")||v("Silk")||v("Android"))}function Ta(){return(v("Chrome")||v("CriOS"))&&!v("Edge")};function Ua(){this.ff="";this.zf=Va}function Wa(){var a=Xa;if(a instanceof Ua&&a.constructor===Ua&&a.zf===Va)return a.ff;fa(a);return"type_error:SafeHtml"}var Va={};Ua.prototype.yb=function(a){this.ff=a;return this};(new Ua).yb("<!DOCTYPE html>");var Xa=(new Ua).yb("");(new Ua).yb("<br>");function Ya(a){var b=new Ha;b.gf=Fa instanceof Ca&&Fa.constructor===Ca&&Fa.Af===Ea?Fa.tf:"type_error:Const";b.wf?b=b.wf:(b instanceof Ha&&b.constructor===Ha&&b.Bf===Ia?b=b.gf:(fa(b),b="type_error:TrustedResourceUrl"),b=b.toString());a.src=b};function Za(a){ca.setTimeout(function(){throw a;},0)}var $a;
function ab(){var a=ca.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!v("Presto")&&(a=function(){var e=document.createElement("IFRAME");e.style.display="none";Ya(e);document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write(Wa());e.close();var g="callImmediate"+Math.random(),k="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=qa(function(l){if(("*"==k||l.origin==k)&&l.data==
g)this.port1.onmessage()},this);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,k)}}});if("undefined"!==typeof a&&!v("Trident")&&!v("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var e=c.Be;c.Be=null;e()}};return function(e){d.next={Be:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var f=document.createElement("SCRIPT");
f.onreadystatechange=function(){f.onreadystatechange=null;f.parentNode.removeChild(f);f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){ca.setTimeout(e,0)}};function bb(){this.xd=this.nc=null}var db=new Ba(function(){return new cb},function(a){a.reset()});bb.prototype.add=function(a,b){var c=db.get();c.set(a,b);this.xd?this.xd.next=c:this.nc=c;this.xd=c};bb.prototype.remove=function(){var a=null;this.nc&&(a=this.nc,this.nc=this.nc.next,this.nc||(this.xd=null),a.next=null);return a};function cb(){this.next=this.scope=this.Pd=null}cb.prototype.set=function(a,b){this.Pd=a;this.scope=b;this.next=null};
cb.prototype.reset=function(){this.next=this.scope=this.Pd=null};function eb(a,b){fb||hb();ib||(fb(),ib=!0);jb.add(a,b)}var fb;function hb(){if(ca.Promise&&ca.Promise.resolve){var a=ca.Promise.resolve(void 0);fb=function(){a.then(kb)}}else fb=function(){var b=kb;!ja(ca.setImmediate)||ca.Window&&ca.Window.prototype&&!v("Edge")&&ca.Window.prototype.setImmediate==ca.setImmediate?($a||($a=ab()),$a(b)):ca.setImmediate(b)}}var ib=!1,jb=new bb;function kb(){for(var a;a=jb.remove();){try{a.Pd.call(a.scope)}catch(b){Za(b)}db.put(a)}ib=!1};function w(a,b){this.Qa=0;this.lf=void 0;this.Sc=this.bc=this.B=null;this.bd=this.Nd=!1;if(a!=ea)try{var c=this;a.call(b,function(d){lb(c,2,d)},function(d){lb(c,3,d)})}catch(d){lb(this,3,d)}}function mb(){this.next=this.context=this.gc=this.Ec=this.child=null;this.Ad=!1}mb.prototype.reset=function(){this.context=this.gc=this.Ec=this.child=null;this.Ad=!1};var nb=new Ba(function(){return new mb},function(a){a.reset()});function ob(a,b,c){var d=nb.get();d.Ec=a;d.gc=b;d.context=c;return d}
function x(a){if(a instanceof w)return a;var b=new w(ea);lb(b,2,a);return b}function pb(a){return new w(function(b,c){c(a)})}function qb(a,b,c){rb(a,b,c,null)||eb(ra(b,a))}function sb(a){return new w(function(b,c){var d=a.length,e=[];if(d)for(var f=function(p,r){d--;e[p]=r;0==d&&b(e)},g=function(p){c(p)},k=0,l;k<a.length;k++)l=a[k],qb(l,ra(f,k),g);else b(e)})}function tb(){var a,b,c=new w(function(d,e){a=d;b=e});return new ub(c,a,b)}
w.prototype.then=function(a,b,c){return vb(this,ja(a)?a:null,ja(b)?b:null,c)};w.prototype.$goog_Thenable=!0;w.prototype.qe=function(a,b){return vb(this,null,a,b)};function wb(a,b){a.bc||2!=a.Qa&&3!=a.Qa||xb(a);a.Sc?a.Sc.next=b:a.bc=b;a.Sc=b}
function vb(a,b,c,d){var e=ob(null,null,null);e.child=new w(function(f,g){e.Ec=b?function(k){try{var l=b.call(d,k);f(l)}catch(p){g(p)}}:f;e.gc=c?function(k){try{var l=c.call(d,k);!q(l)&&k instanceof yb?g(k):f(l)}catch(p){g(p)}}:g});e.child.B=a;wb(a,e);return e.child}w.prototype.Tg=function(a){this.Qa=0;lb(this,2,a)};w.prototype.Ug=function(a){this.Qa=0;lb(this,3,a)};
function lb(a,b,c){0==a.Qa&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Qa=1,rb(c,a.Tg,a.Ug,a)||(a.lf=c,a.Qa=b,a.B=null,xb(a),3!=b||c instanceof yb||zb(a,c)))}function rb(a,b,c,d){if(a instanceof w)return wb(a,ob(b||ea,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return Ab(a,f,b,c,d),!0}catch(g){return c.call(d,g),!0}return!1}
function Ab(a,b,c,d,e){function f(l){k||(k=!0,d.call(e,l))}function g(l){k||(k=!0,c.call(e,l))}var k=!1;try{b.call(a,g,f)}catch(l){f(l)}}function xb(a){a.Nd||(a.Nd=!0,eb(a.Yf,a))}function Bb(a){var b=null;a.bc&&(b=a.bc,a.bc=b.next,b.next=null);a.bc||(a.Sc=null);return b}
w.prototype.Yf=function(){for(var a;a=Bb(this);){var b=this.Qa,c=this.lf;if(3==b&&a.gc&&!a.Ad){var d;for(d=this;d&&d.bd;d=d.B)d.bd=!1}if(a.child)a.child.B=null,Cb(a,b,c);else try{a.Ad?a.Ec.call(a.context):Cb(a,b,c)}catch(e){Db.call(null,e)}nb.put(a)}this.Nd=!1};function Cb(a,b,c){2==b?a.Ec.call(a.context,c):a.gc&&a.gc.call(a.context,c)}function zb(a,b){a.bd=!0;eb(function(){a.bd&&Db.call(null,b)})}var Db=Za;function yb(a){sa.call(this,a)}u(yb,sa);yb.prototype.name="cancel";
function ub(a,b,c){this.ga=a;this.resolve=b;this.reject=c};function Eb(a,b,c,d){c=c||function(r,W){return r==W};d=d||function(r){return a[r]};for(var e=a.length,f=b.length,g=[],k=0;k<e+1;k++)g[k]=[],g[k][0]=0;for(var l=0;l<f+1;l++)g[0][l]=0;for(k=1;k<=e;k++)for(l=1;l<=f;l++)c(a[k-1],b[l-1])?g[k][l]=g[k-1][l-1]+1:g[k][l]=Math.max(g[k-1][l],g[k][l-1]);var p=[];k=e;for(l=f;0<k&&0<l;)c(a[k-1],b[l-1])?(p.unshift(d(k-1,l-1)),k--,l--):g[k-1][l]>g[k][l-1]?k--:l--;return p}function Fb(a){return wa(arguments,function(b,c){return b+c},0)}
function Gb(a){return Fb.apply(null,arguments)/arguments.length}function Hb(a){var b=arguments.length;if(2>b)return 0;var c=Gb.apply(null,arguments);return Fb.apply(null,va(arguments,function(d){return Math.pow(d-c,2)}))/(b-1)}function Ib(a){return Math.sqrt(Hb.apply(null,arguments))};var Jb="StopIteration"in ca?ca.StopIteration:{message:"StopIteration",stack:""};function Kb(){}Kb.prototype.next=function(){throw Jb;};Kb.prototype.ue=function(){return this};function Lb(a){if(a instanceof Kb)return a;if("function"==typeof a.ue)return a.ue(!1);if(ia(a)){var b=0,c=new Kb;c.next=function(){for(;;){if(b>=a.length)throw Jb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Mb(a,b){if(ia(a))try{ua(a,b,void 0)}catch(c){if(c!==Jb)throw c;}else{a=Lb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==Jb)throw c;}}}function Nb(a){if(xa(arguments,function(e){return!e.length})||!arguments.length)return new Kb;var b=new Kb,c=arguments,d=za(c.length);b.next=function(){if(d){for(var e=va(d,function(g,k){return c[k][g]}),f=d.length-1;0<=f;f--){if(d[f]<c[f].length-1){d[f]++;break}if(0==f){d=null;break}d[f]=0}return e}throw Jb;};return b};function Ob(){return v("iPhone")&&!v("iPod")&&!v("iPad")};function Pb(a){var b=Qb;return Object.prototype.hasOwnProperty.call(b,10)?b[10]:b[10]=a(10)};var Rb=v("Opera"),Sb=v("Trident")||v("MSIE"),Tb=v("Edge"),Ub=v("Gecko")&&!(-1!=Oa.toLowerCase().indexOf("webkit")&&!v("Edge"))&&!(v("Trident")||v("MSIE"))&&!v("Edge"),Vb=-1!=Oa.toLowerCase().indexOf("webkit")&&!v("Edge"),Wb=v("Macintosh"),Xb=v("Windows"),Yb=v("Android"),Zb=Ob(),$b=v("iPad"),ac=v("iPod"),bc;
a:{var cc="",dc=function(){var a=Oa;if(Ub)return/rv:([^\);]+)(\)|;)/.exec(a);if(Tb)return/Edge\/([\d\.]+)/.exec(a);if(Sb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Vb)return/WebKit\/(\S+)/.exec(a);if(Rb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();dc&&(cc=dc?dc[1]:"");if(Sb){var ec,fc=ca.document;ec=fc?fc.documentMode:void 0;if(null!=ec&&ec>parseFloat(cc)){bc=String(ec);break a}}bc=cc}var gc=bc,Qb={};function hc(){return Pb(function(){return 0<=Ka(gc)})};var ic=function(){if(Xb){var a=/Windows NT ([0-9.]+)/;return(a=a.exec(Oa))?a[1]:"0"}return Wb?(a=/10[_.][0-9_.]+/,(a=a.exec(Oa))?a[0].replace(/_/g,"."):"10"):Yb?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(Oa))?a[1]:""):Zb||$b||ac?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,(a=a.exec(Oa))?a[1].replace(/_/g,"."):""):""}();var jc=Ob()||v("iPod"),kc=v("iPad");/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function lc(){var a;!(a=Sa()&&!hc())&&(a=kc||jc)&&(a=!(0<=Ka(ic)));this.tg=a;this.ig=!(this.tg||Sb&&!hc());this.Xg=Ta()||Sa()}var mc;function z(){return new window.Map}function nc(a){return Array.from(a.keys())}function A(a){return Array.from(a.values())};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function oc(a,b){this.ra=a;this.l=b||this.Ge()}var pc=0;n=oc.prototype;n.id=h("ra");n.Ge=function(){return{}};n.vf=h("l");n.Ia=function(){return{id:this.ra,value:this.vf()}};n.lb=function(a){return"#"==a.substr(-1)?this.ra:null};function qc(a){return new oc(a.id,a.value)}function rc(a){return new oc(pc++,a||{})}function sc(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);b+=2>d.length?"0"+d:d}return b};var tc={};t("lf.TransactionType",tc);tc.READ_ONLY=0;tc.READ_WRITE=1;function B(a,b,c,d,e){this.sd=a;this.mg=b;this.Wg=c;this.Tf=d;this.Mf=e}t("lf.TransactionStats",B);B.prototype.Rg=h("sd");B.prototype.success=B.prototype.Rg;B.prototype.lg=h("mg");B.prototype.insertedRowCount=B.prototype.lg;B.prototype.Vg=h("Wg");B.prototype.updatedRowCount=B.prototype.Vg;B.prototype.Sf=h("Tf");B.prototype.deletedRowCount=B.prototype.Sf;B.prototype.Lf=h("Mf");B.prototype.changedTableCount=B.prototype.Lf;function uc(a,b){this.ud=a;this.Oa=b||null;this.O=tb();this.sd=!1;this.ya=null}uc.prototype.ja=function(){return(0==this.ud?this.pc():vc(this)).then(function(a){this.sd=!0;return a}.bind(this))};function vc(a){try{wc(a.Oa)}catch(b){return pb(b)}return xc(a).then(function(b){this.Oa.ja();return b}.bind(a))}function xc(a){yc(a);zc(a);return a.pc()}
function yc(a){a.Oa.fb.forEach(function(b,c){c=this.Oa.ca().get(c);c=this.H(c.getName(),c.ib.bind(c),0);var d=A(b.va).map(function(f){return f.id()});b=A(b.la).map(function(f){return f[1]}).concat(A(b.ua));var e=0<b.length;0<d.length&&c.remove(d,e).qe(this.Pe,this);c.put(b).qe(this.Pe,this)},a)}function zc(a){Ac(a.Oa).forEach(function(b){var c=this.H(b.getName(),qc,1);c.remove([]);c.put(b.Ia())},a)}uc.prototype.Pe=function(a){this.O.reject(a)};
uc.prototype.X=function(){if(null===this.ya)if(this.sd)if(0==this.ud)this.ya=new B(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Oa.fb.forEach(function(e){d++;a+=e.ua.size;c+=e.la.size;b+=e.va.size});this.ya=new B(!0,a,c,b,d)}else this.ya=new B(!1,0,0,0,0);return this.ya};function Bc(a){this.Og=a}Bc.prototype.toString=h("Og");var Cc=new Bc("backstore"),Dc=new Bc("cache"),Ec=new Bc("indexstore"),Fc=new Bc("engine"),Gc=new Bc("runner"),Hc=new Bc("observerregistry"),Ic=new Bc("schema");function C(a){return q(a)?new window.Set(a):new window.Set}function D(a){return Array.from(a)}function Jc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(d){c=c&&a.has(d)});return c};function Kc(a,b){this.ra=a;this.l=b||{}}function Lc(a){var b=C();a.forEach(function(c){b.add(c>>9)});return D(b)}Kc.prototype.V=h("ra");function Mc(a,b){b.forEach(function(c){this.l[c.id()]=c.Ia()},a)}function Nc(a,b){b.forEach(function(c){delete this.l[c]},a)}Kc.prototype.Ia=function(){return{id:this.ra,value:JSON.stringify(this.l)}};function Oc(a){return new Kc(a.id,JSON.parse(a.value))};function Pc(a,b,c){this.aa=a;this.Mb=b;this.mf=c}n=Pc.prototype;n.get=function(a){if(0==a.length)return this.Rd();var b=this.Mb;return Qc(this,a).then(function(c){return a.map(function(d){var e=c.get(d>>9);return b(e.l[d])})})};function Qc(a,b){var c=z(),d=tb();a=Lc(b).map(function(e){return new w(function(f,g){try{var k=this.aa.get(e)}catch(l){g(l);return}k.onerror=g;k.onsuccess=function(l){l=Oc(l.target.result);c.set(l.V(),l);f()}},this)},a);sb(a).then(function(){d.resolve(c)});return d.ga}
n.Rd=function(){return new w(function(a,b){var c=[];try{var d=this.aa.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var e=d.result;if(e){var f=Oc(e.value).l,g;for(g in f)c.push(this.Mb(f[g]));e.continue()}else a(c)}.bind(this)},this)};n.Tb=function(a){return new w(function(b,c){try{var d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
n.put=function(a){if(0==a.length)return x();var b=z();a.forEach(function(c){var d=c.id()>>9,e=b.get(d)||null;null===e&&(e=this.mf(this.aa.name,d));Mc(e,[c]);b.set(d,e)},this);a=A(b).map(function(c){return this.Tb(function(){return this.aa.put(c.Ia())}.bind(this))},this);return sb(a)};
n.remove=function(a){if(0==a.length)return this.Tb(function(){return this.aa.clear()}.bind(this));var b=z();a.forEach(function(c){var d=c>>9,e=b.get(d)||null;null===e&&(e=this.mf(this.aa.name,d));Nc(e,[c]);b.set(d,e)},this);a=A(b).map(function(c){return this.Tb(function(){return 0==Object.keys(c.l).length?this.aa.delete(c.V()):this.aa.put(c.Ia())}.bind(this))},this);return sb(a)};function Rc(a,b,c){a=a.b(Dc);var d=[c<<9,(c+1<<9)-1];b=a.Ra(b,d[0],d[1]);c=new Kc(c);Mc(c,b);return c}
function Sc(a,b){return new Kc(b)};function Tc(a){this.U=a.b(Dc);this.A=a.b(Ec);this.g=a.b(Ic)}Tc.prototype.update=function(a){a.forEach(function(b){Uc(this,b);Vc(this,b)},this)};function Vc(a,b){var c=b.getName();b.va.forEach(function(d,e){this.U.remove(c,e)},a);b.ua.forEach(function(d){this.U.set(c,d)},a);b.la.forEach(function(d){this.U.set(c,d[1])},a)}function Uc(a,b){var c=a.g.table(b.getName());Wc(b).forEach(function(d){Xc(this,c,d)},a)}
function Xc(a,b,c){var d=a.A.jc.get(b.getName())||[],e=0;d.forEach(function(f){try{Yc(f,c),e++}catch(g){throw d.slice(0,e).forEach(function(k){Yc(k,[c[1],c[0]])},this),g;}},a)}function Yc(a,b){var c=null===b[1]?void 0:b[1].lb(a.getName()),d=null===b[0]?void 0:b[0].lb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.gb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Zc={};t("lf.ConstraintAction",Zc);Zc.RESTRICT=0;Zc.CASCADE=1;var $c={};t("lf.ConstraintTiming",$c);$c.IMMEDIATE=0;$c.DEFERRABLE=1;var ad={};t("lf.Order",ad);ad.DESC=0;ad.ASC=1;var bd={};t("lf.Type",bd);bd.ARRAY_BUFFER=0;bd.BOOLEAN=1;bd.DATE_TIME=2;bd.INTEGER=3;bd.NUMBER=4;bd.STRING=5;bd.OBJECT=6;var cd={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};t("lf.type.DEFAULT_VALUES",cd);function E(a,b){this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}u(E,Error);function dd(){this.ka=z();this.size=0}n=dd.prototype;n.has=function(a){return this.ka.has(a)};n.set=function(a,b){var c=this.ka.get(a)||null;null===c&&(c=C(),this.ka.set(a,c));c.has(b)||(c.add(b),this.size++);return this};n.Wb=function(a,b){var c=this.ka.get(a)||null;null===c&&(c=C(),this.ka.set(a,c));b.forEach(function(d){c.has(d)||(c.add(d),this.size++)},this)};n.Xd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Wb(b,c)},this)};
n.delete=function(a,b){var c=this.ka.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.ka.delete(a);return b};n.get=function(a){a=this.ka.get(a)||null;return null===a?null:D(a)};n.clear=function(){this.ka.clear();this.size=0};n.keys=function(){return nc(this.ka)};n.values=function(){var a=[];this.ka.forEach(function(b){a.push.apply(a,D(b))});return a};function ed(a){this.A=a.b(Ec);this.g=a.b(Ic);this.U=a.b(Dc);this.Xc=null}function fd(a,b,c){var d=b.Kb.Ag;c.forEach(function(e){d.forEach(function(f){if(null==e.l[f.getName()])throw new E(202,f.j());},this)},a)}function gd(a,b,c,d){b.Kb.Qd.forEach(function(e){e.timing==d&&hd(this,e,c)},a)}function hd(a,b,c){var d=id(a,b);c.forEach(function(e){if(jd(e[0],e[1],b.name)&&(e=e[1].lb(b.name),null!==e&&!d.hb(e)))throw new E(203,b.name);},a)}
function id(a,b){null===a.Xc&&(a.Xc=z());var c=a.Xc.get(b.name)||null;null===c&&(c=a.g.table(b.Ta)[b.Fc].Ba(),c=a.A.get(c.j()),a.Xc.set(b.name,c));return c}function jd(a,b,c){return(null===a?null!==b:null===b)||a.lb(c)!=b.lb(c)}function kd(a,b,c,d){b=ld(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(e){return e.timing==d}),0!=b.length&&md(a,b,c,function(e,f,g){if(f.hb(g))throw new E(203,e.name);}))}
function nd(a,b,c){b=ld(a.g.info(),b.getName(),1);if(null===b)return null;var d=new dd;md(a,b,c,function(e,f,g){f=f.get(g);0<f.length&&d.Wb(e.Ce,f)});return d}function od(a,b,c){var d=new dd;md(a,c,b,function(e,f,g,k){f.get(g).forEach(function(l){d.set(l,{Od:e,Fg:k[1]})})});return d}function md(a,b,c,d){b.forEach(function(e){var f=this.A.get(e.name),g=id(this,e);c.forEach(function(k){if(jd(k[0],k[1],g.getName())){var l=k[0].lb(g.getName());d(e,f,l,k)}},this)},a)}
function pd(a,b,c,d){0!=c.length&&(c=c.map(function(e){return[null,e]}),gd(a,b,c,d))}function qd(a,b,c,d){0!=c.length&&(gd(a,b,c,d),kd(a,b,c,d))}function rd(a,b,c,d){0!=c.length&&(c=c.map(function(e){return[e,null]}),kd(a,b,c,d))}
function sd(a,b,c){var d={pe:[],pf:new dd},e=new dd;e.Wb(b.getName(),c.map(function(g){return g.id()}));do{var f=new dd;e.keys().forEach(function(g){var k=this.g.table(g);g=e.get(g).map(function(l){return[this.U.get(l),null]},this);k=nd(this,k,g);null!==k&&(d.pe.unshift.apply(d.pe,k.keys()),f.Xd(k))},a);e=f;d.pf.Xd(e)}while(0<e.size);return d};function td(a){this.ua=z();this.la=z();this.va=z();this.w=a}n=td.prototype;n.getName=h("w");n.add=function(a){if(this.va.has(a.id())){var b=[this.va.get(a.id()),a];this.la.set(a.id(),b);this.va.delete(a.id())}else this.ua.set(a.id(),a)};n.modify=function(a){var b=a[1],c=a[0].id();this.ua.has(c)?this.ua.set(c,b):this.la.has(c)?(a=[this.la.get(a[0].id())[0],b],this.la.set(c,a)):this.la.set(c,a)};
n.delete=function(a){if(this.ua.has(a.id()))this.ua.delete(a.id());else if(this.la.has(a.id())){var b=this.la.get(a.id())[0];this.la.delete(a.id());this.va.set(a.id(),b)}else this.va.set(a.id(),a)};n.Xd=function(a){a.ua.forEach(function(b){this.add(b)},this);a.la.forEach(function(b){this.modify(b)},this);a.va.forEach(function(b){this.delete(b)},this)};
function Wc(a){var b=[];a.ua.forEach(function(c){b.push([null,c])});a.la.forEach(function(c){b.push(c)});a.va.forEach(function(c){b.push([c,null])});return b}n.toString=function(){return"["+nc(this.ua).toString()+"], ["+nc(this.la).toString()+"], ["+nc(this.va).toString()+"]"};function ud(a){var b=new td(a.w);a.ua.forEach(function(c){b.delete(c)});a.va.forEach(function(c){b.add(c)});a.la.forEach(function(c){b.modify([c[1],c[0]])});return b}
n.og=function(){return 0==this.ua.size&&0==this.va.size&&0==this.la.size};function vd(a,b){this.Z=z();b.forEach(function(c){this.Z.set(c.getName(),c)},this);this.g=a.b(Ic);this.U=a.b(Dc);this.A=a.b(Ec);this.za=new ed(a);this.dd=new Tc(a);this.fb=z()}function Ac(a){var b=[];nc(a.fb).map(function(c){return this.Z.get(c)},a).forEach(function(c){c.Bb()&&(c.Ca().forEach(function(d){b.push(this.A.get(d.j()))},this),b.push(this.A.get(c.getName()+".#")))},a);return b}n=vd.prototype;n.ca=h("Z");
n.zb=function(a,b){wd(this,a);fd(this.za,a,b);pd(this.za,a,b,0);for(var c=0;c<b.length;c++)xd(this,a,[null,b[c]])};function xd(a,b,c){var d=b.getName(),e=a.fb.get(d)||new td(d);a.fb.set(d,e);try{Xc(a.dd,b,c)}catch(g){throw g;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
n.update=function(a,b){wd(this,a);fd(this.za,a,b);b=b.map(function(c){return[this.U.get(c.id()),c]},this);yd(this,a,b);qd(this.za,a,b,0);b.forEach(function(c){xd(this,a,c)},this)};n.Sd=function(a,b){wd(this,a);fd(this.za,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f=a.Kb.od;if(null===f)var g=null;else{g=this.za;f=f.j();var k=d.lb(f);g=g.A.get(f).get(k);g=0==g.length?null:g[0]}null!=g?(e=this.U.get(g),d.ra=g,qd(this.za,a,[[e,d]],0)):pd(this.za,a,[d],0);xd(this,a,[e,d])}};
n.remove=function(a,b){wd(this,a);zd(this,a,b);rd(this.za,a,b,0);for(var c=0;c<b.length;c++)xd(this,a,[b[c],null])};function yd(a,b,c){b=ld(a.g.info(),b.getName(),1);if(null!==b){var d=od(a.za,c,b);d.keys().forEach(function(e){d.get(e).forEach(function(f){var g=this.g.table(f.Od.Ce),k=this.U.get(e),l=g.ib(k.Ia());l.l[f.Od.tb]=f.Fg.l[f.Od.Fc];xd(this,g,[k,l])},this)},a)}}
function zd(a,b,c){if(null!==ld(a.g.info(),b.getName(),1)){b=sd(a.za,b,c);var d=b.pf;b.pe.forEach(function(e){var f=this.g.table(e);e=d.get(e).map(function(g){return this.U.get(g)},this);rd(this.za,f,e,0);e.forEach(function(g){xd(this,f,[g,null])},this)},a)}}function wc(a){a.fb.forEach(function(b){var c=this.Z.get(b.getName());pd(this.za,c,A(b.ua),1);rd(this.za,c,A(b.va),1);qd(this.za,c,A(b.la),1)},a)}n.ja=aa();n.Gb=function(){var a=A(this.fb).map(function(b){return ud(b)});this.dd.update(a)};
function wd(a,b){if(!a.Z.has(b.getName()))throw new E(106,b.getName());};function F(a,b,c,d){this.from=a;this.m=b;this.da=this.from==G?!1:c;this.na=this.m==G?!1:d}var G=new (aa());F.prototype.toString=function(){return(this.da?"(":"[")+(this.from==G?"unbound":this.from)+", "+(this.m==G?"unbound":this.m)+(this.na?")":"]")};function Ad(a){if(Bd(a))return[];var b=null,c=null;a.from==G||(b=new F(G,a.from,!1,!a.da));a.m==G||(c=new F(a.m,G,!a.na,!1));return[b,c].filter(function(d){return null!==d})}F.prototype.reverse=function(){return new F(this.m,this.from,this.na,this.da)};
function Cd(a,b){var c=Dd(a.from,b.from,!0,a.da,b.da);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.m==G||d.m>a.from||d.m==a.from&&!d.na&&!a.da}function Ed(){return new F(G,G,!1,!1)}function Bd(a){return a.from==G&&a.m==G}function Fd(a){return a.from==a.m&&a.from!=G&&!a.da&&!a.na}F.prototype.contains=function(a){var b=this.m==G||a<this.m||a==this.m&&!this.na;return(this.from==G||a>this.from||a==this.from&&!this.da)&&b};
function Dd(a,b,c,d,e){function f(g){return c?g:1==g?-1:1}d=d||!1;e=e||!1;return a==G?b==G?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==G?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function Gd(a,b){var c=Dd(a.from,b.from,!0,a.da,b.da);0==c&&(c=Dd(a.m,b.m,!1,a.na,b.na));return c}function Hd(a){if(0==a.length)return[];a.sort(Gd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new F(G,a[c].from,!1,!0):c==b.length-1?new F(a[c-1].m,G,!0,!1):new F(a[c-1].m,a[c].from,!0,!0);return b};function Id(a){this.ic=[];q(a)&&this.add(a)}Id.prototype.toString=function(){return this.ic.map(function(a){return a.toString()}).join(",")};Id.prototype.hb=function(a){return this.ic.some(function(b){return b.contains(a)})};Id.prototype.Ob=h("ic");
Id.prototype.add=function(a){if(0!=a.length)if(a=this.ic.concat(a),1==a.length)this.ic=a;else{a.sort(Gd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(Cd(c,a[d])){var e=a[d],f=Ed();if(c.from!=G&&e.from!=G){var g=Dd(c.from,e.from,!0);1!=g?(f.from=c.from,f.da=0!=g?c.da:c.da&&e.da):(f.from=e.from,f.da=e.da)}c.m!=G&&e.m!=G&&(g=Dd(c.m,e.m,!1),-1!=g?(f.m=c.m,f.na=0!=g?c.na:c.na&&e.na):(f.m=e.m,f.na=e.na));c=f}else b.push(c),c=a[d];b.push(c);this.ic=b}};
function Jd(a,b){var c=[];a.Ob().map(function(d){return b.Ob().map(function(e){if(Cd(d,e)){var f=Ed();var g=Dd(d.from,e.from,!0);g=0==g?d.da?d:e:-1!=g?d:e;f.from=g.from;f.da=g.da;d.m==G||e.m==G?e=d.m==G?e:d:(g=Dd(d.m,e.m,!1),e=0==g?d.na?d:e:-1==g?d:e);f.m=e.m;f.na=e.na}else f=null;return f})}).forEach(function(d){c=c.concat(d)});return new Id(c.filter(function(d){return null!==d}))};function H(a,b){this.entries=a;this.L=C(b);this.Wa=null}H.prototype.o=function(){return D(this.L)};function Kd(a){return a.entries.map(function(b){return b.ta.l})}function Ld(a){return a.entries.map(function(b){return b.ta.id()})}function Md(a,b){return a.Wa.get(b.j())}var Nd=null;function Od(){null===Nd&&(Nd=new H([],[]));return Nd}
function Pd(a){if(0==a.length)return Od();var b=a.reduce(function(g,k){return g+k.entries.length},0),c=Array(b),d=0;b=a.map(function(g){var k=z();g.entries.forEach(function(l){c[d++]=l;k.set(l.id,l)});return k});for(var e=z(),f=0;f<c.length;f++)b.every(function(g){return g.has(c[f].id)})&&e.set(c[f].id,c[f]);return new H(A(e),D(a[0].L))}function Qd(a){if(0==a.length)return Od();var b=z();a.forEach(function(c){c.entries.forEach(function(d){b.set(d.id,d)})});return new H(A(b),D(a[0].L))}
function Rd(a,b){var c=1<b.length;a=a.map(function(d){return new Sd(d,c)});return new H(a,b)}function Sd(a,b){this.ta=a;this.id=Td++;this.Ud=b}var Td=0;function I(a,b){var c=b.Ja;return null!==c&&a.ta.l.hasOwnProperty(c)?a.ta.l[c]:a.Ud?a.ta.l[Ud(b.H())][b.getName()]:a.ta.l[b.getName()]}function Vd(a,b,c){var d=b.Ja;if(null!=d)a.ta.l[d]=c;else if(a.Ud){d=Ud(b.H());var e=a.ta.l[d];null==e&&(e={},a.ta.l[d]=e);e[b.getName()]=c}else a.ta.l[b.getName()]=c}
function Wd(a,b,c,d){function e(g,k){if(g.Ud){g=g.ta.l;for(var l in g)f[l]=g[l]}else f[k[0]]=g.ta.l}var f={};e(a,b);e(c,d);a=new oc(-1,f);return new Sd(a,!0)};t("lf.bind",function(a){return new Xd(a)});function Xd(a){this.ea=a}t("lf.Binder",Xd);Xd.prototype.Ba=h("ea");function Yd(){this.Ve=Zd();var a=$d();this.Nb=z();this.Nb.set(1,ae());this.Nb.set(2,be());this.Nb.set(4,a);this.Nb.set(3,a);this.Nb.set(5,ce());this.Nb.set(6,de())}var ee;function fe(){null!=ee||(ee=new Yd);return ee}function ge(a,b,c){a=a.Nb.get(b)||null;if(null===a)throw new E(550);c=a.get(c)||null;if(null===c)throw new E(550);return c}
function Zd(){function a(c){return c}var b=z();b.set(1,function(c){return null===c?null:c?1:0});b.set(2,function(c){return null===c?null:c.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function ae(){var a=z();a.set("eq",function(b,c){return b==c});a.set("neq",function(b,c){return b!=c});return a}
function $d(){var a=ae();a.set("between",function(b,c){return null===b||null===c[0]||null===c[1]?!1:b>=c[0]&&b<=c[1]});a.set("gte",function(b,c){return null===b||null===c?!1:b>=c});a.set("gt",function(b,c){return null===b||null===c?!1:b>c});a.set("in",function(b,c){return-1!=c.indexOf(b)});a.set("lte",function(b,c){return null===b||null===c?!1:b<=c});a.set("lt",function(b,c){return null===b||null===c?!1:b<c});return a}
function ce(){var a=$d();a.set("match",function(b,c){return null===b||null===c?!1:(new RegExp(c)).test(b)});return a}function de(){var a=z();a.set("eq",function(b,c){if(null!==c)throw new E(550);return null===b});a.set("neq",function(b,c){if(null!==c)throw new E(550);return null!==b});return a}
function be(){var a=z();a.set("between",function(b,c){return null===b||null===c[0]||null===c[1]?!1:b.getTime()>=c[0].getTime()&&b.getTime()<=c[1].getTime()});a.set("eq",function(b,c){return(null===b?-1:b.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(b,c){return null===b||null===c?!1:b.getTime()>=c.getTime()});a.set("gt",function(b,c){return null===b||null===c?!1:b.getTime()>c.getTime()});a.set("in",function(b,c){return c.some(function(d){return d.getTime()==b.getTime()})});a.set("lte",
function(b,c){return null===b||null===c?!1:b.getTime()<=c.getTime()});a.set("lt",function(b,c){return null===b||null===c?!1:b.getTime()<c.getTime()});a.set("neq",function(b,c){return(null===b?-1:b.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.h=this.B=null}var he=[];J.prototype.getParent=h("B");J.prototype.Za=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function ie(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function M(a){return a.h||he}function je(a,b){return M(a)[b]||null}function ke(a,b,c){b.B=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function le(a,b){b.B=a;null===a.h?a.h=[b]:a.h.push(b)}
function me(a,b){var c=a.h&&a.h[b];return c?(c.B=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}J.prototype.removeChild=function(a){return me(this,M(this).indexOf(a))};function ne(a,b,c){je(a,c).B=null;b.B=a;a.h[c]=b}function oe(a,b,c){!1!==b.call(c,a)&&M(a).forEach(function(d){oe(d,b,c)})};function pe(){J.call(this);this.ra=qe++}u(pe,J);var qe=0;pe.prototype.V=h("ra");function re(a,b,c){pe.call(this);this.I=a;this.value=b;this.D=c;this.sc=ge(fe(),this.I.F(),this.D);this.Sa=!1;this.ac=b}u(re,pe);n=re.prototype;n.Lb=function(){var a=new re(this.I,this.value,this.D);a.ac=this.ac;a.rd(this.Sa);var b=this.V();a.ra=b;return a};n.jb=function(a){return null!=a?(a.push(this.I),a):[this.I]};n.o=function(a){a=null!=a?a:C();a.add(this.I.H());return a};n.rd=ba("Sa");
function se(a){var b=!1;a.value instanceof Xd||(b="array"==fa(a.value)?!a.value.some(function(c){return c instanceof Xd}):!0);if(!b)throw new E(501);}n.eval=function(a){se(this);if("in"==this.D)return te(this,a);var b=a.entries.filter(function(c){return this.sc(I(c,this.I),this.value)!=this.Sa},this);return new H(b,a.o())};
n.bind=function(a){if(this.ac instanceof Xd){var b=this.ac.Ba();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==fa(this.ac)&&(this.value=this.ac.map(function(c){if(c instanceof Xd){var d=c.Ba();if(a.length<=d)throw new E(510);return a[c.Ba()]}return c}))};function te(a,b){var c=C(a.value),d=function(e){return null===e?!1:c.has(e)!=this.Sa}.bind(a);a=b.entries.filter(function(e){return d(I(e,this.I))},a);return new H(a,b.o())}
n.toString=function(){return"value_pred("+this.I.j()+" "+this.D+(this.Sa?"(complement)":"")+" "+this.value+")"};n.gd=function(){se(this);return null!==this.value&&("between"==this.D||"in"==this.D||"eq"==this.D||"gt"==this.D||"gte"==this.D||"lt"==this.D||"lte"==this.D)};
n.re=function(){var a=null;if("between"==this.D)a=new F(ue(this,this.value[0]),ue(this,this.value[1]),!1,!1);else{if("in"==this.D)return a=this.value.map(function(b){return new F(b,b,!1,!1)}),new Id(this.Sa?Hd(a):a);a=ue(this,this.value);a="eq"==this.D?new F(a,a,!1,!1):"gte"==this.D?new F(a,G,!1,!1):"gt"==this.D?new F(a,G,!0,!1):"lte"==this.D?new F(G,a,!1,!1):new F(G,a,!1,!0)}return new Id(this.Sa?Ad(a):[a])};function ue(a,b){return 2==a.I.F()?b.getTime():b};function ve(a){this.$=a;this.Tc=this.Fa=null}function we(a,b){null===a.Fa&&null!=a.u&&(a.Fa=xe(a.u));return a.Fa.get(b)||null}function xe(a){var b=z();oe(a,function(c){b.set(c.V(),c)});return b}function ye(a,b){b.u&&(a.u=b.u.Lb());a.Tc=b}ve.prototype.bind=function(){return this};function ze(a,b){a=a.u;null!=a&&oe(a,function(c){c instanceof re&&c.bind(b)})};function Ae(a){ve.call(this,a)}u(Ae,ve);function Be(a){var b="";a.forEach(function(c,d){b+=c.I.j()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Ae.prototype.ca=function(){return C(this.from)};Ae.prototype.clone=function(){var a=new Ae(this.$);ye(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.W=this.W;a.K=this.K;this.M&&(a.M=this.M.slice());this.qa&&(a.qa=this.qa.slice());this.Sb&&(a.Sb=this.Sb);this.Hb&&(a.Hb=this.Hb);a.ab=this.ab;return a};
Ae.prototype.bind=function(a){Ae.eb.bind.call(this,a);null!=this.Sb&&(this.W=a[this.Sb.Ba()]);null!=this.Hb&&(this.K=a[this.Hb.Ba()]);ze(this,a);return this};function Ce(a,b){this.Ga=a;this.Z=b}Ce.prototype.Za=h("Ga");Ce.prototype.ca=h("Z");function De(a){var b=C();a.forEach(function(c){c.ca().forEach(b.add.bind(b))});return b};function Ee(a,b){this.global=a;this.Ya=a.b(Cc);this.pd=b.map(function(c){return c.context});this.ef=b.map(function(c){return c.ee});this.Id=De(this.ef);this.se=Fe(this);this.Cb=tb()}function Fe(a){return a.pd.some(function(b){return!(b instanceof Ae)})?1:0}n=Ee.prototype;
n.exec=function(){function a(){var f=d.shift();if(f){var g=e[c.length];return f.Za().exec(b,g).then(function(k){c.push(k[0]);return a()})}return x()}var b=0==this.se?void 0:new vd(this.global,this.Id),c=[],d=this.ef.slice(),e=this.pd;return a().then(function(){this.ia=this.Ya.Db(this.se,D(this.Id),b);return this.ia.ja()}.bind(this)).then(function(){this.be(c);return c}.bind(this),function(f){null!=b&&b.Gb();throw f;})};n.F=h("se");n.ca=h("Id");n.V=function(){return ka(this)};n.be=aa();
n.X=function(){var a=null;null!=this.ia&&(a=this.ia.X());return null===a?new B(!1,0,0,0,0):a};function Ge(a,b){Ee.call(this,a,b);this.Fb=a.b(Hc)}u(Ge,Ee);Ge.prototype.getPriority=m(0);Ge.prototype.be=function(a){this.pd.forEach(function(b,c){He(this.Fb,b,a[c])},this)};function Ie(a,b){this.c=a;this.Fb=a.b(Hc);this.Ha=a.b(Gc);this.dd=new Tc(a);this.fb=b;var c=a.b(Ic);a=this.fb.map(function(d){return c.table(d.getName())});this.Z=C(a);this.Cb=tb()}n=Ie.prototype;n.exec=function(){this.dd.update(this.fb);this.Ic();return x()};n.F=m(1);n.ca=h("Z");n.V=function(){return ka(this)};n.getPriority=m(1);n.Ic=function(){var a=Je(this.Fb,this.Z);0!=a.length&&(a=new Ge(this.c,a),Ke(this.Ha,a))};function Le(a){this.c=a;this.Ya=a.b(Cc);this.Ha=a.b(Gc)}Le.prototype.$d=function(a){a=new Ie(this.c,a);Ke(this.Ha,a)};function N(a,b){this.Yb=a;this.i=b;this.Va=z()}t("lf.backstore.FirebaseRawBackStore",N);N.prototype.$c=h("i");N.prototype.ad=function(){throw new E(351);};function Me(a,b){var c=tb(),d=a;b.length&&(d=a.child(b));d.once("value",function(e){c.resolve(e.val())},function(e){c.reject(e)});return c.ga}function Ne(a,b,c){function d(f){f?e.reject(f):e.resolve()}c=c||!1;var e=tb();c?a.set(b,d):a.update(b,d);return e.ga}
N.prototype.Da=function(a){return Me(this.i,"@rev/R").then(function(b){this.Pa=b;return Me(this.i,"@table")}.bind(this)).then(function(b){var c=0;for(d in b)this.Va.set(d,b[d]),b[d]>c&&(c=b[d]);a.oa().forEach(function(e){this.Va.has(e.getName())||(b[e.getName()]=++c)},this);var d=this.i.child("@table");return Ne(d,b)}.bind(this))};
function Oe(a,b,c){var d=a.Va.get(b);return null!=d?function(){var e={},f=tb();this.i.orderByChild("T").equalTo(d).once("value",function(g){g.forEach(function(k){var l=c(k.val());e[parseInt(k.key(),10)]=l});f.resolve(e)});return f.ga}.call(a).then(function(e){e["@rev"]={R:++this.Pa};return Ne(this.i,e)}.bind(a)):x()}N.prototype.qc=function(a){return Oe(this,a,m(null)).then(function(){this.Va.delete(a);return Ne(this.i.child("@table/"+a),null,!0)}.bind(this))};N.prototype.dropTable=N.prototype.qc;
N.prototype.oc=function(a,b,c){return Oe(this,a,function(d){var e=d.P;e[b]=c;return{R:this.Pa+1,T:d.T,P:e}}.bind(this))};N.prototype.addTableColumn=N.prototype.oc;N.prototype.rc=function(a,b){return Oe(this,a,function(c){var d=c.P;delete d[b];return{R:this.Pa+1,T:c.T,P:d}}.bind(this))};N.prototype.dropTableColumn=N.prototype.rc;N.prototype.Hc=function(a,b,c){return Oe(this,a,function(d){var e=d.P;e[c]=e[b];delete e[b];return{R:this.Pa+1,T:d.T,P:e}}.bind(this))};N.prototype.renameTableColumn=N.prototype.Hc;
N.prototype.vb=function(){throw new E(351);};N.prototype.createRow=N.prototype.vb;N.prototype.yc=h("Yb");N.prototype.getVersion=N.prototype.yc;N.prototype.cc=function(a){var b=tb();a=this.Va.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(c){var d=[];c.forEach(function(e){d.push(e.val().P)});b.resolve(d)});return b.ga};N.prototype.dump=function(){var a={},b=nc(this.Va).map(function(c){return this.cc(c).then(function(d){a[c]=d})}.bind(this));return sb(b).then(function(){return a})};
N.prototype.dump=N.prototype.dump;function Pe(a,b,c){uc.call(this,b,c);this.i=a}u(Pe,uc);Pe.prototype.H=function(a){return this.i.wc(a)};
Pe.prototype.pc=function(){if(0==this.ud)return this.O.resolve(),this.O.ga;var a=this.Oa.fb;if(0==a.size)this.O.resolve();else{var b=this.i.Pa+1;this.i.Pa=b;var c={"@rev":{R:b}};a.forEach(function(d,e){var f=this.i.Va.get(e);d.ua.forEach(function(g,k){c[k]={R:b,T:f,P:g.l}});d.la.forEach(function(g,k){c[k]={R:b,T:f,P:g[1].l}});d.va.forEach(function(g,k){c[k]=null})},this);this.i.i.update(c,function(d){null===d?this.O.resolve():(this.i.Pa=b-1,d=A(a).map(function(e){return Qe(this.i,e.getName())},this),
sb(d).then(this.O.reject.bind(this.O),this.O.reject.bind(this.O)))}.bind(this))}return this.O.ga};function Re(){this.Aa=z()}function Se(a,b){if(0==b.length)return A(a.Aa);var c=[];b.forEach(function(d){d=this.Aa.get(d)||null;null===d||c.push(d)},a);return c}Re.prototype.getData=h("Aa");Re.prototype.get=function(a){return x(Se(this,a))};function Te(a,b){b.forEach(function(c){this.Aa.set(c.id(),c)},a)}Re.prototype.put=function(a){Te(this,a);return x()};function Ue(a,b){0==b.length||b.length==a.Aa.size?a.Aa.clear():b.forEach(function(c){this.Aa.delete(c)},a)}
Re.prototype.remove=function(a){Ue(this,a);return x()};function Ve(a){return 0==a.Aa.size?0:nc(a.Aa).reduce(function(b,c){return b>c?b:c},0)};function We(a,b){this.g=a;this.Gf=b;this.Gc=z();this.Pa=-1;this.L=z();this.Va=z();this.Fd=null}n=We.prototype;
n.Da=function(a){this.i=this.Gf.child(this.g.name());var b=a||function(){return x()};return Me(this.i,"@db/version").then(function(c){return null===c?Ne(this.i,Xe(this),!0).then(function(){var d=new N(0,this.i);return b(d)}.bind(this)).then(function(){return this.Da()}.bind(this)):c==this.g.version()?Me(this.i,"@rev/R").then(function(d){this.Pa=d;return Me(this.i,"@table")}.bind(this)).then(function(d){for(var e in d)this.Va.set(e,d[e]);d=this.g.oa().map(function(f){return Qe(this,f.getName())},this);
return sb(d)}.bind(this)).then(function(){Ye(this);Ze(this);return x()}.bind(this)):this.ce(c,b).then(function(){return this.Da()}.bind(this))}.bind(this))};n.ce=function(a,b){var c=new N(a,this.i);return c.Da(this.g).then(function(){return x()}.bind(this)).then(function(){return b(c)}).then(function(){var d=this.i.child("@db");return Ne(d,{version:this.g.version()},!0)}.bind(this))};
function Ze(a){a.i.off();a.i.on("child_removed",a.Cg.bind(a));a.Gd&&(a.Gd.off(),a.Gc.clear());a.Gd=a.i.orderByChild("R").startAt(a.Pa+1);a.Gd.on("value",a.$d.bind(a))}function Ye(a){pc=A(a.L).map(function(b){return Ve(b)}).reduce(function(b,c){return b>c?b:c},0)+1}n.Cg=function(a){var b=a.val(),c=this.Gc.get(b.T)||null;null===c&&(c=C(),this.Gc.set(b.T,c));c.add(parseInt(a.key(),10))};
n.$d=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Pa&&(this.Pa=b,a=$e(this,a),a.forEach(function(c){var d=this.L.get(c.getName()),e=nc(c.va);0<e.length&&Ue(d,e);var f=A(c.ua);c.la.forEach(function(g){f.push(g[1])});Te(d,f)},this),0<a.length&&this.Cc(a),Ze(this))};
function $e(a,b){var c=C(),d=z();a.Va.forEach(function(e,f){var g=this.L.get(f),k=new td(f);this.Gc.has(e)&&(f=D(this.Gc.get(e)),f.forEach(function(l){c.add(l)}),Se(g,f).forEach(function(l){k.delete(l)}));d.set(e,k)}.bind(a));b.forEach(function(e){if("@rev"!=e.key()){var f=parseInt(e.key(),10);if(!c.has(f)){var g=e.val();e=d.get(g.T);var k=this.L.get(e.getName());g=this.g.table(e.getName()).ib({id:f,value:g.P});k.getData().has(f)?e.modify([Se(k,[f])[0],g]):e.add(g)}}}.bind(a));return A(d).filter(function(e){return!e.og()})}
function Qe(a,b){var c=tb(),d=a.Va.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(f){var g=new Re,k=[];f.forEach(function(l){k.push(e.ib({id:parseInt(l.key(),10),value:l.val().P}))});Te(g,k);this.L.set(b,g);c.resolve()}.bind(a));return c.ga}function Xe(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Pa=1;b["@table"]={};a.g.oa().forEach(function(c,d){c=c.getName();b["@table"][c]=d;this.L.set(c,new Re);this.Va.set(c,d)},a);return b}
n.Db=function(a,b,c){return new Pe(this,a,c)};n.wc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new E(101,a);};n.close=aa();n.subscribe=ba("Fd");n.Cc=function(a){null!=this.Fd&&this.Fd(a)};n.Lc=m(!1);function O(a,b,c,d){this.i=b;this.ia=c;this.Yb=a;this.Rc=d}t("lf.backstore.IndexedDBRawBackStore",O);O.prototype.$c=h("i");O.prototype.getRawDBInstance=O.prototype.$c;O.prototype.ad=h("ia");O.prototype.getRawTransaction=O.prototype.ad;O.prototype.qc=function(a){return new w(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};O.prototype.dropTable=O.prototype.qc;
function af(a,b,c,d){return new w(function(e,f){try{var g=this.ia.objectStore(b);var k=g.openCursor()}catch(l){f(l);return}k.onsuccess=function(){var l=k.result;l?(c(l),l.continue()):(d(g),e())};k.onerror=f},a)}function bf(a){return a instanceof ArrayBuffer?sc(a):a instanceof Date?a.getTime():a}function cf(a,b,c){function d(f){var g=Oc(f.value),k=g.l,l;for(l in k){var p=qc(k[l]);c(p);k[l]=p.Ia()}f.update(g.Ia())}function e(f){var g=qc(f.value);c(g);f.update(g.Ia())}return af(a,b,a.Rc?d:e,aa())}
O.prototype.oc=function(a,b,c){var d=bf(c);return cf(this,a,function(e){e.l[b]=d})};O.prototype.addTableColumn=O.prototype.oc;O.prototype.rc=function(a,b){return cf(this,a,function(c){delete c.l[b]})};O.prototype.dropTableColumn=O.prototype.rc;O.prototype.Hc=function(a,b,c){return cf(this,a,function(d){d.l[c]=d.l[b];delete d.l[b]})};O.prototype.renameTableColumn=O.prototype.Hc;
function df(a,b){var c=[];return new w(function(d,e){try{var f=this.ia.objectStore(b).openCursor()}catch(g){e(g);return}f.onsuccess=function(){var g=f.result;if(g){if(this.Rc){var k=Oc(g.value).l,l;for(l in k)c.push(k[l])}else c.push(g.value);g.continue()}else d(c)}.bind(this);f.onerror=e},a)}O.prototype.vb=function(a){var b={},c;for(c in a)b[c]=bf(a[c]);return rc(b)};O.prototype.createRow=O.prototype.vb;O.prototype.yc=h("Yb");O.prototype.getVersion=O.prototype.yc;
O.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.cc(d))}return sb(b).then(function(e){var f={};e.forEach(function(g,k){f[a.item(k)]=g});return f})};O.prototype.dump=O.prototype.dump;O.prototype.cc=function(a){return df(this,a).then(function(b){return b.map(function(c){return c.value})})};function ef(a,b){this.aa=a;this.Mb=b}ef.prototype.get=function(a){if(0==a.length)return ff(this);a=a.map(function(b){return new w(function(c,d){try{var e=this.aa.get(b)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(f){c(this.Mb(f.target.result))}.bind(this)},this)},this);return sb(a)};
function ff(a){return new w(function(b,c){var d=[];try{var e=this.aa.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var f=e.result;f?(d.push(this.Mb(f.value)),f.continue()):b(d)}.bind(this)},a)}ef.prototype.Tb=function(a){return new w(function(b,c){try{var d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};ef.prototype.put=function(a){if(0==a.length)return x();a=a.map(function(b){return this.Tb(function(){return this.aa.put(b.Ia())}.bind(this))},this);return sb(a)};
ef.prototype.remove=function(a,b){function c(){var e=a.map(function(f){return d.Tb(function(){return d.aa.delete(f)})});return sb(e)}var d=this;return b?c():new w(function(e,f){var g=d.aa.count();g.onsuccess=function(k){0==a.length||k.target.result==a.length?d.Tb(function(){return d.aa.clear()}).then(e,f):c().then(e,f)};g.onerror=f})};function gf(a,b,c,d,e){uc.call(this,c,e);this.c=a;this.ia=b;this.Rc=d;this.ia.oncomplete=this.O.resolve.bind(this.O);this.ia.onabort=this.O.reject.bind(this.O)}u(gf,uc);gf.prototype.H=function(a,b,c){return this.Rc?(c=null!=c?c:0,a=this.ia.objectStore(a),new Pc(a,b,0==c?ra(Rc,this.c):Sc)):new ef(this.ia.objectStore(a),b)};gf.prototype.pc=function(){return this.O.ga};function hf(a,b){this.c=a;this.g=b;this.Cd=b.fe.Vf||!1}n=hf.prototype;
n.Da=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return x()};return new w(function(d,e){try{var f=b.open(this.g.name(),this.g.version())}catch(g){e(g);return}f.onerror=function(g){g=g.target.error;e(new E(361,g.name,g.message))};f.onupgradeneeded=function(g){jf(this,c,g).then(aa(),e)}.bind(this);f.onsuccess=function(g){this.i=g.target.result;this.le().then(function(k){pc=Math.max(pc,k+1);d(this.i)}.bind(this))}.bind(this)},
this)};function jf(a,b,c){var d=c.target.result;c=new O(c.oldVersion,d,c.target.transaction,a.Cd);kf(d);a.g.oa().forEach(ra(a.Of,d),a);return b(c)}function kf(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(e){try{a.deleteObjectStore(e)}catch(f){}})}
n.Of=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Bb()&&(b.Ca().forEach(function(c){mf(a,c.j())},this),mf(a,nf(b)))};function mf(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}n.Db=function(a,b,c){b=this.i.transaction(of(b),0==a?"readonly":"readwrite");return new gf(this.c,b,a,this.Cd,c)};
function of(a){var b=C();a.forEach(function(c){b.add(c.getName());c.Bb()&&(c.Ca().forEach(function(d){b.add(d.j())}),b.add(nf(c)))});return D(b)}
n.le=function(){function a(){if(0==c.length)return x();var g=c.shift();return b(g).then(a)}function b(g){return new w(function(k,l){try{var p=d.transaction([g]).objectStore(g).openCursor(null,"prev")}catch(r){l(r);return}p.onsuccess=function(r){(r=r.target.result)&&(e=Math.max(e,f(r)));k(e)};p.onerror=function(){k(e)}})}var c=this.g.oa().map(function(g){return g.getName()}),d=this.i,e=0,f=function(g){return this.Cd?(g=Oc(g.value),Object.keys(g.l).reduce(function(k,l){return Math.max(k,l)},0)):g.key}.bind(this);
return new w(function(g){a().then(function(){g(e)})})};n.close=function(){this.i.close()};n.wc=function(){throw new E(511);};n.subscribe=aa();n.Cc=aa();n.Lc=m(!0);function pf(a,b,c){uc.call(this,b,c);this.aa=a;0==b&&this.O.resolve()}u(pf,uc);pf.prototype.H=function(a){return this.aa.wc(a)};pf.prototype.pc=function(){this.O.resolve();return this.O.ga};function qf(a){this.g=a;this.L=z()}n=qf.prototype;n.Da=function(){this.g.oa().forEach(this.jg,this);return x()};n.wc=function(a){var b=this.L.get(a)||null;if(null===b)throw new E(101,a);return b};n.Db=function(a,b,c){return new pf(this,a,c)};function rf(a,b){if(!a.L.has(b)){var c=new Re;a.L.set(b,c)}}n.jg=function(a){rf(this,a.getName());a.Bb()&&(a.Ca().forEach(function(b){rf(this,b.j())},this),rf(this,nf(a)))};n.close=aa();n.subscribe=aa();n.Cc=aa();n.Lc=m(!0);function sf(a){qf.call(this,a);this.ld=null}u(sf,qf);sf.prototype.subscribe=function(a){null===this.ld&&(this.ld=a)};sf.prototype.Cc=function(a){null===this.ld||this.ld(a)};sf.prototype.Lc=m(!1);function tf(a,b,c){this.ia=a;this.w='"'+b+'"';this.Mb=c}tf.prototype.get=function(a){var b=this.Mb;return uf(this.ia,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(c){for(var d=c.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:c.rows.item(f).id,value:JSON.parse(c.rows.item(f).value)});return e})};
tf.prototype.put=function(a){if(0==a.length)return x();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(c){uf(this.ia,b,[c.id(),JSON.stringify(c.l)])},this);return x()};tf.prototype.remove=function(a){uf(this.ia,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return x()};function vf(a,b,c){uc.call(this,b,c);this.i=a;this.L=z();this.Jd=[]}u(vf,uc);function wf(a){return a.replace(".","__d__").replace("#","__s__")}vf.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new tf(this,wf(a),b),this.L.set(a,c));return c};function uf(a,b,c,d){var e=tb();a.Jd.push({Qg:b,Gg:c,transform:d,O:e});return e.ga}
vf.prototype.pc=function(){var a=null,b=this.O.reject.bind(this.O),c=function(f,g){this.O.reject(g)}.bind(this),d=[],e=function(f,g){if(null!==a){var k=g;null!=a.transform&&null!=g&&(k=a.transform(g));d.push(k);a.O.resolve(k)}0<this.Jd.length?(a=g=this.Jd.shift(),f.executeSql(g.Qg,g.Gg,e,c)):this.O.resolve(d)}.bind(this);0==this.ud?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.O.ga};function P(a,b,c){this.i=c;this.c=a;this.Yb=b}t("lf.backstore.WebSqlRawBackStore",P);P.prototype.$c=h("i");P.prototype.getRawDBInstance=P.prototype.$c;P.prototype.ad=function(){throw new E(356);};P.prototype.getRawTransaction=P.prototype.ad;function xf(a){return new vf(a.i,1,new vd(a.c,C()))}P.prototype.qc=function(a){var b=xf(this);uf(b,"DROP TABLE "+a,[]);return b.ja()};P.prototype.dropTable=P.prototype.qc;
P.prototype.cc=function(a){var b=xf(this);uf(b,"SELECT id, value FROM "+a,[]);return b.ja().then(function(c){for(var d=c[0].rows.length,e=Array(d),f=0;f<d;++f)e[f]={id:c[0].rows.item(f).id,value:JSON.parse(c[0].rows.item(f).value)};return x(e)})};function yf(a,b,c){var d=xf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.cc(b).then(function(f){f.forEach(function(g){g=c(g);uf(d,e,[JSON.stringify(g.value),g.id])});return d.ja()})}
P.prototype.oc=function(a,b,c){var d=bf(c);return yf(this,a,function(e){e.value[b]=d;return e})};P.prototype.addTableColumn=P.prototype.oc;P.prototype.rc=function(a,b){return yf(this,a,function(c){delete c.value[b];return c})};P.prototype.dropTableColumn=P.prototype.rc;P.prototype.Hc=function(a,b,c){return yf(this,a,function(d){d.value[c]=d.value[b];delete d.value[b];return d})};P.prototype.renameTableColumn=P.prototype.Hc;P.prototype.vb=function(a){var b={},c;for(c in a)b[c]=bf(a[c]);return rc(b)};
P.prototype.createRow=P.prototype.vb;P.prototype.yc=h("Yb");P.prototype.getVersion=P.prototype.yc;function zf(a){uf(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(b){for(var c=Array(b.rows.length),d=0;d<c.length;++d)c[d]=b.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=tb(),b=xf(this);zf(b);var c={};b.ja().then(function(d){d=d[0].filter(function(e){return"__lf_ver"!=e&&"__WebKitDatabaseInfoTable__"!=e}).map(function(e){return this.cc(e).then(function(f){c[e]=f})},this);sb(d).then(function(){a.resolve(c)})}.bind(this));return a.ga};P.prototype.dump=P.prototype.dump;function Af(a,b,c){this.c=a;this.g=b;this.Pg=c||1}n=Af.prototype;n.Da=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return x()};return new w(function(c,d){var e=window.openDatabase(this.g.name(),"",this.g.name(),this.Pg);if(null!=e)this.i=e,Bf(this,b).then(function(){this.le().then(c,d)}.bind(this),function(f){if(f instanceof E)throw f;throw new E(354,f.message);});else throw new E(354);},this)};
function Bf(a,b){var c=tb(),d=new vf(a.i,1,new vd(a.c,C()));uf(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);uf(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ja().then(function(e){var f=0;e[1].rows.length&&(f=e[1].rows.item(0).v);f<this.g.version()?this.ce(b,f).then(c.resolve.bind(c)):f>this.g.version()?c.reject(new E(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ga}n.Db=function(a,b,c){if(null!=this.i)return new vf(this.i,a,c);throw new E(2);};n.close=aa();
n.wc=function(){throw new E(512);};n.subscribe=function(){throw new E(355);};n.Cc=function(){throw new E(355);};n.ce=function(a,b){return Cf(this).then(function(){return a(new P(this.c,b,this.i))}.bind(this))};
function Cf(a){var b=a.g.oa(),c=new vf(a.i,1,new vd(a.c,C())),d=new vf(a.i,1,new vd(a.c,C()));uf(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);zf(c);return c.ja().then(function(e){var f=e[1];f.filter(function(p){return-1!=p.indexOf("__d__")}).forEach(function(p){uf(d,'DROP TABLE "'+(p+'"'),[])});var g=[],k=[],l=[];b.map(function(p){-1==f.indexOf(p.getName())&&g.push(p.getName());p.Bb&&(p.Ca().forEach(function(r){r=wf(r.j());g.push(r);k.push(r)}),p=wf(nf(p)),g.push(p),l.push(p))});
g.forEach(function(p){uf(d,'CREATE TABLE "'+(p+'"(id INTEGER PRIMARY KEY, value TEXT)'),[])});return d.ja()})}n.le=function(){var a=0,b=tb(),c=function(e){var f=new vf(this.i,0);uf(f,'SELECT MAX(id) FROM "'+(e+'"'),[]);return f.ja().then(function(g){g=g[0].rows.item(0)["MAX(id)"];a=Math.max(g,a)})}.bind(this),d=this.g.oa().map(function(e){return c(e.getName())});sb(d).then(function(){pc=Math.max(pc,a+1);b.resolve()},function(e){b.reject(e)});return b.ga};n.Lc=m(!0);function Df(a){this.ka=z();this.lc=z();a.oa().forEach(function(b){this.lc.set(b.getName(),C())},this)}n=Df.prototype;n.set=function(a,b){this.ka.set(b.id(),b);this.lc.get(a).add(b.id())};n.Wb=function(a,b){var c=this.lc.get(a);b.forEach(function(d){this.ka.set(d.id(),d);c.add(d.id())},this)};n.get=function(a){return this.ka.get(a)||null};function Ef(a,b){return b.map(function(c){return this.get(c)},a)}
n.Ra=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.lc.get(a);if(a.size<f-e)a.forEach(function(g){g>=e&&g<=f&&(g=this.ka.get(g),d.push(g))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.ka.get(b),d.push(c));return d};n.remove=function(a,b){this.ka.delete(b);this.lc.get(a).delete(b)};n.clear=function(){this.ka.clear();this.lc.clear()};function Ff(a,b,c){var d=0,e=a.length;for(c=c||Gf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function Gf(a,b){return a-b}function Hf(a,b,c){c=Ff(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function If(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Jf(){this.ha=0;this.Bc=null}Jf.prototype.add=function(a,b){this.ha+=b;this.Bc=null===this.Bc?a:a>this.Bc?a:this.Bc};Jf.prototype.remove=function(a,b){this.ha-=b};Jf.prototype.clear=function(){this.ha=0};function Kf(a,b){a.clear();b.forEach(function(c){this.ha+=c.ha},a)};function Lf(a,b,c){this.w=a;this.Y=b;this.yf=c;this.ya=new Jf;this.clear()}var Mf=[];n=Lf.prototype;n.getName=h("w");n.toString=function(){return this.xa.toString()};n.add=function(a,b){this.xa=this.xa.zb(a,b)};n.set=function(a,b){this.xa=this.xa.zb(a,b,!0)};n.remove=function(a,b){this.xa=this.xa.remove(a,b)};n.get=function(a){return this.xa.get(a)};n.Wc=function(a){if(null==a)return this.X().ha;if(a instanceof F){if(Bd(a))return this.X().ha;if(Fd(a))return this.get(a.from).length}return this.Ra([a]).length};
n.X=h("ya");n.Rd=function(a,b,c){var d=Array(a);this.xa.fill({offset:b?this.ya.ha-a-c:c,count:a,oe:0},d);return b?d.reverse():d};
n.Ra=function(a,b,c,d){var e=Nf(this.xa).a[0];if(!q(e)||0==c)return Mf;b=b||!1;c=null!=c?Math.min(c,this.ya.ha):this.ya.ha;d=d||0;var f=Math.min(Math.max(this.ya.ha-d,0),c);if(0==f)return Mf;if(!q(a)||1==a.length&&a[0]instanceof F&&Bd(a[0]))return this.Rd(f,b,d);a=this.Y.sf(a);var g=Array(b?this.ya.ha:f),k={count:0,W:g.length,reverse:b,K:d},l=1<this.gb().Vd();a.forEach(function(p){var r=this.Y.qd(p);r=this.Y.Td(p)?e:r[0];r=this.xa.ag(r);for(var W=0;null!=r&&k.count<k.W;){if(l){for(var K=r,y=p,L=k,
V=g,ma=K.s.gb(),gb=-1,Qa=0;Qa<K.a.length;++Qa)if(ma.Ab(K.a[Qa],y)){gb=Qa;break}if(-1!=gb)for(Qa=gb;Qa<K.a.length&&L.count<L.W;++Qa)ma.Ab(K.a[Qa],y)&&Of(K,L,V,Qa)}else r.Ra(p,k,g);0!=k.K||r.fd(p)?W=0:W++;r=2==W?null:r.next()}},this);g.length>k.count&&g.splice(k.count,g.length-k.count);return b?If(g,b,c,d):g};n.clear=function(){this.xa=Pf(this);this.ya.clear()};n.hb=function(a){return this.xa.hb(a)};n.min=function(){return this.Eb(this.Y.min.bind(this.Y))};n.max=function(){return this.Eb(this.Y.max.bind(this.Y))};
function Qf(a,b,c){if(!a.Y.Kd(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.yf?[b.C[c]]:b.C[c]]}n.Eb=function(a){a:{var b=Nf(this.xa);var c=0;do if(c>=b.a.length)b=b.wa,c=0;else{var d=Qf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Rf(this.xa);d=c.a.length-1;do if(0>d)c=c.ob,d=0;else{var e=Qf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};n.La=h("yf");n.gb=h("Y");
n.Na=function(a,b){return null!=a?0==this.Y.compare(a,b):!1};n.Ia=function(){for(var a=[],b=Nf(this.xa);b;)a.push(new oc(b.ra,[b.a,b.C])),b=b.wa;return a};function Sf(a,b,c,d){a=new Lf(b,a,c);d=Tf(d,a);a.xa=d;return a}function Uf(a,b){this.ra=a;this.s=b;this.kb=0;this.wa=this.ob=this.B=null;this.a=[];this.C=[];this.h=[];this.ag=1==b.gb().Vd()?this.Le:this.Ke}function Pf(a){return new Uf(pc++,a)}function Vf(a){return 0==a.kb}n=Uf.prototype;n.next=h("wa");
function Wf(a){function b(g){return null!=g?g.ra.toString():"_"}var c=a.ra+"["+a.a.join("|")+"]",d=a.h.map(function(g){return g.ra}).join("|"),e=a.C.join("/"),f=b(a.ob)+"{";f=Vf(a)?f+e:f+d;f=f+"}"+b(a.B);a.wa&&(a=Wf(a.wa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}n.toString=function(){var a="",b=Wf(this);a+=b[0]+"\n"+b[1]+"\n";this.h.length&&(a+=this.h[0].toString());return a};function Nf(a){return Vf(a)?a:Nf(a.h[0])}function Rf(a){return Vf(a)?a:Rf(a.h[a.h.length-1])}
function Xf(a,b){b&&(b.ob=a);a&&(a.wa=b)}function Yf(a){var b=a[0],c=Pf(b.s);c.kb=b.kb+1;c.h=a;for(b=0;b<a.length;++b)a[b].B=c,0<b&&c.a.push(a[b].a[0]);return c}function Zf(a){var b=a,c=[];do c.push(b),b=b.wa;while(b);if(512>=c.length)b=Yf(c);else{var d=c.length,e=0;b=Pf(a.s);for(b.kb=a.kb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),g=Yf(f);g.B=b;b.h.length&&(b.a.push(f[0].a[0]),Xf(b.h[b.h.length-1],g));b.h.push(g);e+=a;d-=a}}return b}
n.get=function(a){var b=$f(this,a);if(Vf(this)){var c=Mf;this.s.Na(this.a[b],a)&&(c=c.concat(this.C[b]));return c}b=this.s.Na(this.a[b],a)?b+1:b;return this.h[b].get(a)};n.hb=function(a){var b=$f(this,a);return this.s.Na(this.a[b],a)?!0:Vf(this)?!1:this.h[b].hb(a)};n.remove=function(a,b){ag(this,a,-1,b);return null===this.B?(a=this,1==this.h.length&&(a=this.h[0],a.B=null),a):this};function bg(a){return Vf(a)?a.a[0]:bg(a.h[0])}
function cg(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(bg(a.h[b]))}
function ag(a,b,c,d){var e=$f(a,b),f=Vf(a);if(!f){var g=a.s.Na(a.a[e],b)?e+1:e;if(ag(a.h[g],b,g,d))cg(a);else return!1}else if(!a.s.Na(a.a[e],b))return!1;if(a.a.length>e&&a.s.Na(a.a[e],b)){if(q(d)&&!a.s.La()&&f&&(g=a.C[e],d=Ff(g,d,void 0),0>d?d=!1:(g.splice(d,1),d=!0),d&&a.s.X().remove(b,1),a.C[e].length))return!1;a.a.splice(e,1);f&&(f=a.s.La()?1:a.C[e].length,a.C.splice(e,1),a.s.X().remove(b,f))}if(256>a.a.length&&null!==a.B){a:{if(a.wa&&256<a.wa.a.length)b=a.wa,e=d=0,f=a.a.length+1;else if(a.ob&&
256<a.ob.a.length)b=a.ob,d=a.ob.a.length-1,e=Vf(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=Vf(a)?a.C:a.h;Vf(a)?g=b.C:(g=b.h,g[e].B=a);d.splice(f,0,g[e]);g.splice(e,1);Vf(b)||(cg(b),cg(a));b=!0}b||dg(a,c)}return!0}
function dg(a,b){var c;if(a.wa&&511>a.wa.a.length){var d=a.wa;var e=c=0}else a.ob&&(d=a.ob,c=d.a.length,e=Vf(d)?d.C.length:d.h.length);c=[c,0].concat(a.a);Array.prototype.splice.apply(d.a,c);c=null;Vf(a)?c=a.C:(c=a.h,c.forEach(function(f){f.B=d}));c=[e,0].concat(c);Array.prototype.splice.apply(Vf(d)?d.C:d.h,c);Xf(a.ob,a.wa);Vf(d)||cg(d);-1!=b&&(a.B.a.splice(b,1),a.B.h.splice(b,1))}
n.zb=function(a,b,c){var d=$f(this,a);if(Vf(this)){if(this.s.Na(this.a[d],a)){if(c)this.s.X().remove(a,this.s.La()?1:this.C[d].length),this.C[d]=this.s.La()?b:[b];else{if(this.s.La())throw new E(201,this.s.getName(),JSON.stringify(a));if(!Hf(this.C[d],b))throw new E(109);}this.s.X().add(a,1);return this}this.a.splice(d,0,a);this.C.splice(d,0,this.s.La()?b:[b]);this.s.X().add(a,1);512==this.a.length?(d=Pf(this.s),a=Pf(this.s),a.kb=1,a.a=[this.a[256]],a.h=[this,d],a.B=this.B,this.B=a,d.a=this.a.splice(256),
d.C=this.C.splice(256),d.B=a,Xf(d,this.wa),Xf(this,d),d=a):d=this;return d}d=this.s.Na(this.a[d],a)?d+1:d;a=this.h[d].zb(a,b,c);Vf(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].B=this,a.h[0].B=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?eg(this):this};
function eg(a){var b=Pf(a.s),c=Pf(a.s);b.B=a.B;b.kb=a.kb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.B=b;c.kb=a.kb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(d){d.B=c});a.B=b;Xf(c,a.wa);Xf(a,c);return b}function $f(a,b){for(var c=0,d=a.a.length,e=a.s.gb();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}n.Le=function(a){if(!Vf(this)){var b=$f(this,a);this.s.Na(this.a[b],a)&&b++;return this.h[b].Le(a)}return this};
n.Ke=function(a){if(!Vf(this)){var b=$f(this,a);this.s.Na(this.a[b],a)&&(a.some(function(c){return c==G})||b++);return this.h[b].Ke(a)}return this};
n.Ra=function(a,b,c){function d(y){return y[0]?y[1]?0:1:-1}var e=this.s.gb(),f=0,g=this.a.length-1,k=this.a,l=d(e.ub(k[f],a)),p=d(e.ub(k[g],a));if(1!=l&&(-1!=l||-1!=p)){var r=function(y,L){L=y+L>>1;return L==y?L+1:L},W=function(y,L,V){if(y>=L)return 0==V?L:-1;var ma=d(e.ub(k[y],a));if(0==ma)return y;if(1==ma)return-1;ma=r(y,L);if(ma==L)return 0==V?L:-1;var gb=d(e.ub(k[ma],a));return 0==gb?W(y,ma,gb):-1==gb?W(ma+1,L,V):W(y+1,ma,gb)},K=function(y,L){if(y>=L)return y;var V=d(e.ub(k[L],a));if(0==V)return L;
if(-1==V)return y;V=r(y,L);if(V==L)return y;var ma=d(e.ub(k[V],a));return 0==ma?K(V,L):1==ma?K(y,V-1):-1};0!=l&&(f=W(f+1,g,p));-1!=f&&(g=K(f,g),-1!=g&&g>=f&&fg(this,b,c,f,g+1))}};function Of(a,b,c,d){if(a.s.La())!b.reverse&&b.K?b.K--:c[b.count++]=a.C[d];else for(var e=0;e<a.C[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.C[d][e]}function fg(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)Of(a,b,c,d)}
n.fill=function(a,b){if(Vf(this))for(var c=0;c<this.C.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.s.La()?1:this.C[c].length,0>a.offset)for(var d=this.C[c].length+a.offset;d<this.C[c].length&&0<a.count;++d)b[a.oe++]=this.C[c][d],a.count--}else if(this.s.La())b[a.oe++]=this.C[c],a.count--;else for(d=0;d<this.C[c].length&&0<a.count;++d)b[a.oe++]=this.C[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Tf(a,b){var c=b.X();a=a.map(function(e){var f=new Uf(e.id(),b);f.a=e.l[0];f.C=e.l[1];f.a.forEach(function(g,k){c.add(g,b.La()?1:f.C[k].length)});return f});for(var d=0;d<a.length-1;++d)Xf(a[d],a[d+1]);return 1<a.length?Zf(a[0]):a[0]}n.fd=function(a){return this.s.gb().fd(this.a[0],a)};function gg(a){this.Uc=0==a?hg:ig;this.Yd=0==a?function(b){return null!=b?b.reverse():null}:function(b){return b||null};this.de=0==a?jg:kg}function ig(a,b){return a>b?1:a<b?-1:0}function hg(a,b){return ig(b,a)}function kg(a,b){return Gd(a,b)}function jg(a,b){return Gd(b,a)}n=gg.prototype;n.ub=function(a,b){b=this.Yd(b);var c=[b.from==G,b.m==G];if(!c[0]){var d=this.Uc(a,b.from);c[0]=b.da?1==d:-1!=d}c[1]||(d=this.Uc(a,b.m),c[1]=b.na?-1==d:1!=d);return c};n.compare=function(a,b){return this.Uc(a,b)};
n.min=function(a,b){return a<b?1:a==b?0:-1};n.max=function(a,b){return a>b?1:a==b?0:-1};n.Ab=function(a,b){a=this.ub(a,b);return a[0]&&a[1]};n.fd=function(a,b){return this.Ab(a,b)};n.sf=function(a){return a.filter(function(b){return null!==b}).sort(function(b,c){return this.de(b,c)}.bind(this))};n.Td=function(a){return this.Yd(a).from==G};n.qd=function(a){a=this.Yd(a);return[a.from,a.m]};n.Kd=function(a){return null!==a};n.Vd=m(1);
n.toString=function(){return this.compare==hg?"SimpleComparator_DESC":"SimpleComparator_ASC"};function lg(a){gg.call(this,a);this.Uc=0==a?mg:ng}u(lg,gg);function ng(a,b){return null===a?null===b?0:-1:null===b?1:ig(a,b)}function mg(a,b){return ng(b,a)}lg.prototype.Ab=function(a,b){return null===a?Bd(b):lg.eb.Ab.call(this,a,b)};lg.prototype.Eb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};lg.prototype.min=function(a,b){var c=this.Eb(a,b);null===c&&(c=lg.eb.min.call(this,a,b));return c};
lg.prototype.max=function(a,b){var c=this.Eb(a,b);null===c&&(c=lg.eb.max.call(this,a,b));return c};function og(a){this.pa=a.map(function(b){return new gg(b)})}function pg(a,b,c,d){for(var e=0,f=0;f<a.pa.length&&0==e;++f)e=d(a.pa[f],b[f],c[f]);return e}n=og.prototype;n.compare=function(a,b){return pg(this,a,b,function(c,d,e){return d==G||e==G?0:c.compare(d,e)})};n.min=function(a,b){return pg(this,a,b,function(c,d,e){return c.min(d,e)})};n.max=function(a,b){return pg(this,a,b,function(c,d,e){return c.max(d,e)})};
n.ub=function(a,b){for(var c=[!0,!0],d=0;d<this.pa.length&&(c[0]||c[1]);++d){var e=this.pa[d].ub(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};n.Ab=function(a,b){for(var c=!0,d=0;d<this.pa.length&&c;++d)c=this.pa[d].Ab(a[d],b[d]);return c};n.fd=function(a,b){return this.pa[0].Ab(a[0],b[0])};
n.sf=function(a){var b=a.filter(function(d){return d.every(ha)});a=Array(this.pa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(d){return d[c]});a.forEach(function(d,e){d.sort(function(f,g){return this.pa[e].de(f,g)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(d){return d[c]});return b.sort(function(d,e){for(var f=0,g=0;g<this.pa.length&&0==f;++g)f=this.pa[g].de(d[g],e[g]);return f}.bind(this))};n.Td=function(a){return this.pa[0].Td(a[0])};
n.qd=function(a){var b=a.map(function(c,d){return this.pa[d].qd(c)[0]},this);a=a.map(function(c,d){return this.pa[d].qd(c)[1]},this);return[b,a]};n.Kd=function(a){return a.every(function(b,c){return this.pa[c].Kd(b)},this)};n.Vd=function(){return this.pa.length};function qg(a){og.call(this,a);this.pa=a.map(function(b){return new lg(b)})}u(qg,og);function rg(a){if(1==a.f.length)return new gg(a.f[0].order);var b=a.f.map(function(c){return c.order});return a.f.some(function(c){return c.$.fc()})?new qg(b):new og(b)};function sg(a){this.ea=a;this.mb=C();this.Kc=new Jf;this.ya=new Jf}n=sg.prototype;n.getName=function(){return this.ea.getName()};n.add=function(a,b){null===a?(this.mb.add(b),this.Kc.add(a,1)):this.ea.add(a,b)};n.set=function(a,b){null===a?(this.mb.clear(),this.Kc.clear(),this.add(a,b)):this.ea.set(a,b)};n.remove=function(a,b){null===a?b?(this.mb.delete(b),this.Kc.remove(a,1)):(this.mb.clear(),this.Kc.clear()):this.ea.remove(a,b)};n.get=function(a){return null===a?D(this.mb):this.ea.get(a)};n.Wc=function(a){return this.ea.Wc(a)};
n.X=function(){Kf(this.ya,[this.ea.X(),this.Kc]);return this.ya};n.Ra=function(a,b,c,d){b=this.ea.Ra(a,b,c,d);return null!=a?b:b.concat(D(this.mb))};n.clear=function(){this.mb.clear();this.ea.clear()};n.hb=function(a){return null===a?0!=this.mb.size:this.ea.hb(a)};n.min=function(){return this.ea.min()};n.max=function(){return this.ea.max()};n.Ia=function(){return[new oc(-2,D(this.mb))].concat(this.ea.Ia())};n.gb=function(){return this.ea.gb()};
function tg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);d=b[c].l;b=b.slice(0);b.splice(c,1);a=a(b);var e=new sg(a);d.forEach(function(f){e.mb.add(f)});return e}n.La=function(){return this.ea.La()};function ug(a){this.w=a;this.qb=C();this.Y=new gg(1)}n=ug.prototype;n.getName=h("w");n.add=function(a){if("number"!=typeof a)throw new E(103);this.qb.add(a)};n.set=function(a,b){this.add(a,b)};n.remove=function(a){this.qb.delete(a)};n.get=function(a){return this.hb(a)?[a]:[]};n.min=function(){return this.Eb(this.Y.min.bind(this.Y))};n.max=function(){return this.Eb(this.Y.max.bind(this.Y))};
n.Eb=function(a){if(0==this.qb.size)return null;var b=D(this.qb).reduce(function(c,d){return null===c||1==a(d,c)?d:c},null);return[b,[b]]};n.Wc=function(){return this.qb.size};n.Ra=function(a,b,c,d){var e=a||[Ed()];a=D(this.qb).filter(function(f){return e.some(function(g){return this.Y.Ab(f,g)},this)},this);return If(a,b,c,d)};n.clear=function(){this.qb.clear()};n.hb=function(a){return this.qb.has(a)};n.Ia=function(){return[new oc(0,D(this.qb))]};n.gb=h("Y");
function vg(a,b){var c=new ug(a);b[0].l.forEach(function(d){c.add(d,d)});return c}n.La=m(!0);n.X=function(){var a=new Jf;a.ha=this.qb.size;return a};function wg(a){this.Ya=a.b(Cc);this.A=a.b(Ec);this.U=a.b(Dc)}wg.prototype.Da=function(a){var b=a.oa(),c=function(){if(0==b.length)return x();var d=b.shift();return(d.Bb()?xg(this,d):yg(this,d)).then(c)}.bind(this);return c()};function yg(a,b){var c=a.Ya.Db(0,[b]);a=c.H(b.getName(),b.ib.bind(b),0).get([]).then(function(d){this.U.Wb(b.getName(),d);zg(this,b,d)}.bind(a));c.ja();return a}
function zg(a,b,c){var d=a.A.jc.get(b.getName())||[];c.forEach(function(e){d.forEach(function(f){var g=e.lb(f.getName());f.add(g,e.id())})})}function xg(a,b){var c=a.Ya.Db(0,[b]),d=c.H(b.getName(),b.ib,0).get([]).then(function(e){this.U.Wb(b.getName(),e)}.bind(a));a=b.Ca().map(function(e){return Ag(this,e,c)},a).concat(Bg(a,b,c));c.ja();return sb(a.concat(d))}
function Ag(a,b,c){c=c.H(b.j(),qc,1);var d=rg(b);return c.get([]).then(function(e){if(0<e.length)if(Cg(b)){var f=Sf.bind(void 0,d,b.j(),b.zc);e=tg(f,e);this.A.set(b.kc,e)}else e=Sf(d,b.j(),b.zc,e),this.A.set(b.kc,e)}.bind(a))}function Bg(a,b,c){return c.H(nf(b),qc,1).get([]).then(function(d){0<d.length&&(d=vg(nf(b),d),this.A.set(b.getName(),d))}.bind(a))};function Dg(){this.aa=z();this.jc=z()}Dg.prototype.Da=function(a){a.oa().forEach(function(b){var c=[];this.jc.set(b.getName(),c);var d=nf(b);if(null===this.get(d)){var e=new ug(d);c.push(e);this.aa.set(d,e)}b.Ca().forEach(function(f){var g=rg(f);g=new Lf(f.j(),g,f.zc);g=Cg(f)&&1==f.f.length?new sg(g):g;c.push(g);this.aa.set(f.j(),g)},this)},this);return x()};Dg.prototype.get=function(a){return this.aa.get(a)||null};
Dg.prototype.set=function(a,b){var c=this.jc.get(a)||null;null===c&&(c=[],this.jc.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].getName()==b.getName()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.aa.set(b.getName(),b)};function Eg(a,b){var c=[],d=null,e=null;oe(a,function(f){var g=b(f);null==f.getParent()?e=g:le(d,g);var k=f.getParent();null!==k&&M(k).length==M(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<M(f).length&&c.push(g);d=null===f.h?c[c.length-1]:g});return e}function Fg(a){return Gg(a,function(b){return null===b.h})}
function Hg(a){var b=a.getParent(),c=0;null!==b&&(c=M(b).indexOf(a),b.removeChild(a));var d=M(a).slice();d.forEach(function(e,f){a.removeChild(e);null===b||ke(b,e,c+f)});return{parent:b,children:d}}function Ig(a,b){M(a).slice().forEach(function(c){a.removeChild(c);le(b,c)});le(a,b)}function Jg(a){var b=je(a,0);Hg(a);Ig(b,a);return b}
function Kg(a,b,c){var d=je(a,0),e=M(d).slice();if(!e.some(function(f){return b(f)}))return a;Hg(a);e.forEach(function(f,g){if(b(f)){var k=c(a);me(d,g);le(k,f);ke(d,k,g)}});return d}function Lg(a,b,c,d){var e=a.getParent();null!==e&&(a=M(e).indexOf(a),me(e,a),ke(e,c,a));M(b).slice().forEach(function(f){b.removeChild(f);le(d,f)});return c}function Gg(a,b,c){function d(f){b(f)&&e.push(f);null!=c&&c(f)||M(f).forEach(d)}var e=[];d(a);return e}
function Mg(a,b){var c=b||function(e){return e.toString()+"\n"},d="";oe(a,function(e){for(var f=0;f<ie(e);f++)d+="-";d+=c(e)});return d};function Ng(a){pe.call(this);this.nb=a;this.Sa=!1}u(Ng,pe);n=Ng.prototype;n.Lb=function(){return Eg(this,function(a){if(a instanceof Ng){var b=new Ng(a.nb);b.Sa=a.Sa;a=a.V();b.ra=a;return b}return a.Lb()})};n.jb=function(a){var b=a||[];oe(this,function(c){c!=this&&c.jb(b)}.bind(this));a=C(b);return D(a)};n.o=function(a){var b=null!=a?a:C();oe(this,function(c){c!=this&&c.o(b)}.bind(this));return b};n.rd=function(a){this.Sa!=a&&(this.Sa=a,this.nb="and"==this.nb?"or":"and",M(this).forEach(function(b){return b.rd(a)}))};
n.eval=function(a){var b=M(this).map(function(c){return c.eval(a)});return Og(this,b)};function Og(a,b){return"and"==a.nb?Pd(b):Qd(b)}n.toString=function(){return"combined_pred_"+this.nb.toString()};n.re=function(){if("or"==this.nb){var a=new Id;M(this).forEach(function(b){b=b.re().Ob();a.add(b)});return a}return new Id};n.gd=function(){return"or"==this.nb?Pg(this):!1};
function Pg(a){var b=null;return M(a).every(function(c){if(!(c instanceof re&&c.gd()))return!1;null===b&&(b=c.I);return b.j()==c.I.j()})};function Qg(a,b,c){pe.call(this);this.fa=a;this.ma=b;this.D=c;this.Zd=null;a=fe();this.sc=ge(a,this.fa.F(),this.D);this.rg=a.Ve.get(this.fa.F())||null}u(Qg,pe);n=Qg.prototype;n.Lb=function(){var a=new Qg(this.fa,this.ma,this.D),b=this.V();a.ra=b;return a};n.jb=function(a){return null!=a?(a.push(this.fa),a.push(this.ma),a):[this.fa,this.ma]};n.o=function(a){a=null!=a?a:C();a.add(this.fa.H());a.add(this.ma.H());return a};
n.reverse=function(){var a=this.D;switch(this.D){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Qg(this.ma,this.fa,a)};n.eval=function(a){var b=a.entries.filter(function(c){var d=I(c,this.fa);c=I(c,this.ma);return this.sc(d,c)},this);return new H(b,a.o())};n.toString=function(){return"join_pred("+this.fa.j()+" "+this.D+" "+this.ma.j()+")"};
function Rg(a,b,c){if(-1!=b.o().indexOf(Ud(a.fa.H()))){var d=b;b=c}else d=c;if(d.entries.length>b.entries.length){a:{c=a.fa;a.fa=a.ma;a.ma=c;switch(a.D){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.D=c;a.sc=ge(fe(),a.fa.F(),a.D)}return[b,d]}return[d,b]}function Sg(a){var b={};a.jb().forEach(function(c){b[c.getName()]=null});return b}
function Tg(a,b,c){null===a.Zd&&(a.Zd=Sg(a.ma.H()));var d=new Sd(new oc(-1,a.Zd),!1);return Wd(b,c,d,[Ud(a.ma.H())])}
function Ug(a,b,c,d){var e=[b,c];d||(e=Rg(a,b,c));b=e[0];c=e[1];e=b;var f=c,g=a.fa,k=a.ma;d&&(e=c,f=b,g=a.ma,k=a.fa);var l=new dd,p=[];e.entries.forEach(function(K){var y=String(I(K,g));l.set(y,K)});var r=e.o(),W=f.o();f.entries.forEach(function(K){var y=I(K,k),L=String(y);null!==y&&l.has(L)?l.get(L).forEach(function(V){V=Wd(K,W,V,r);p.push(V)}):d&&p.push(Tg(this,K,W))}.bind(a));a=b.o().concat(c.o());return new H(p,a)}
function Vg(a,b,c,d,e){function f(K,y){y=new Sd(y,1<r.length);K=Wd(K,W,y,r);p.push(K)}var g=d.gg.H(),k=b,l=c;-1!=b.o().indexOf(Ud(g))&&(k=c,l=b);var p=[],r=l.o(),W=k.o();k.entries.forEach(function(K){var y=this.rg(I(K,d.zg));y=d.index.get(y);0!=y.length&&(d.index.La()?f(K,e.get(y[0])):Ef(e,y).forEach(f.bind(null,K)))},a);a=k.o().concat(l.o());return new H(p,a)};function Wg(a,b,c){return null===b?new re(a,b,c):q(b.j)?new Qg(a,b,c):new re(a,b,c)};var Xg={};t("lf.schema.DataStoreType",Xg);Xg.INDEXED_DB=0;Xg.MEMORY=1;Xg.LOCAL_STORAGE=2;Xg.FIREBASE=3;Xg.WEB_SQL=4;Xg.OBSERVABLE_STORE=5;function Yg(a,b,c,d){this.kc=a;this.name=b;this.zc=c;this.f=d}Yg.prototype.j=function(){return this.kc+"."+this.name};function Cg(a){return a.f.some(function(b){return b.$.fc()})}function Q(a,b,c,d){this.w=a;this.sa=c;this.J=b;this.nd=d;this.Ja=null}t("lf.schema.Table",Q);Q.prototype.getName=h("w");Q.prototype.getName=Q.prototype.getName;
function Ud(a){return a.Ja||a.w}Q.prototype.as=function(a){var b=new this.constructor(this.w);b.Ja=a;b.Lg=this.Lg;return b};Q.prototype.as=Q.prototype.as;Q.prototype.createRow=Q.prototype.vb;Q.prototype.deserializeRow=Q.prototype.ib;Q.prototype.Ca=h("sa");Q.prototype.getIndices=Q.prototype.Ca;Q.prototype.jb=h("J");Q.prototype.getColumns=Q.prototype.jb;Q.prototype.getConstraint=Q.prototype.Je;Q.prototype.Bb=h("nd");Q.prototype.persistentIndex=Q.prototype.Bb;function nf(a){return a.w+".#"};function R(a,b){this.child=a;this.Jb=b;this.Ja=null}n=R.prototype;n.getName=function(){return this.Jb+"("+this.child.getName()+")"};n.j=function(){return this.Jb+"("+this.child.j()+")"};n.H=function(){return this.child.H()};n.toString=function(){return this.j()};n.F=function(){return this.child.F()};n.Ca=function(){return[]};n.Ba=m(null);n.fc=m(!1);n.as=function(a){this.Ja=a;return this};R.prototype.as=R.prototype.as;
function Zg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function $g(){this.Ja=null;this.S=new Q("#UnknownTable",[],[],!1)}n=$g.prototype;n.getName=m("*");n.j=function(){return this.getName()};n.toString=function(){return this.j()};n.H=h("S");n.F=m(4);n.Ca=function(){return[]};n.Ba=m(null);n.fc=m(!1);t("lf.fn.avg",function(a){return new R(a,"AVG")});function ah(a){return new R(a||new $g,"COUNT")}t("lf.fn.count",ah);function bh(a){return new R(a,"DISTINCT")}t("lf.fn.distinct",bh);t("lf.fn.max",function(a){return new R(a,"MAX")});t("lf.fn.min",function(a){return new R(a,"MIN")});t("lf.fn.stddev",function(a){return new R(a,"STDDEV")});t("lf.fn.sum",function(a){return new R(a,"SUM")});t("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){J.call(this);this.Xf=b}u(S,J);S.prototype.exec=function(a,b){switch(this.Xf){case 1:return ch(this,a,b);case 0:return dh(this,a,b);default:return eh(this,a,b)}};S.prototype.toString=m("dummy_node");S.prototype.Mc=function(){return this.toString()};function eh(a,b,c){return new w(function(d){d(this.ba([],b,c))}.bind(a))}function ch(a,b,c){return je(a,0).exec(b,c).then(function(d){return this.ba(d,b,c)}.bind(a))}
function dh(a,b,c){var d=M(a).map(function(e){return e.exec(b,c)});return sb(d).then(function(e){var f=[];e.forEach(function(g){for(var k=0;k<g.length;++k)f.push(g[k])});return this.ba(f,b,c)}.bind(a))};function fh(a){S.call(this,-1,1);this.ye=a}u(fh,S);fh.prototype.toString=function(){return"aggregation("+this.ye.map(function(a){return a.j()}).toString()+")"};fh.prototype.ba=function(a){a.forEach(function(b){gh(new hh(b,this.ye))},this);return a};function hh(a,b){this.Ma=a;this.J=b}
function gh(a){a.J.forEach(function(b){b=Zg(b).reverse();for(var c=1;c<b.length;c++){var d=b[c],e=Zg(d).slice(-1)[0],f=d.child instanceof R?Md(this.Ma,d.child):this.Ma;if(null!==f.Wa&&f.Wa.has(d.j()))break;f=ih(d.Jb,f,e);e=this.Ma;null===e.Wa&&(e.Wa=z());e.Wa.set(d.j(),f)}},a)}
function ih(a,b,c){var d=null;switch(a){case "MIN":d=jh(b,c,function(e,f){return f<e?f:e});break;case "MAX":d=jh(b,c,function(e,f){return f>e?f:e});break;case "DISTINCT":d=kh(b,c);break;case "COUNT":d=lh(b,c);break;case "SUM":d=mh(b,c);break;case "AVG":a=lh(b,c);0<a&&(d=mh(b,c)/a);break;case "GEOMEAN":d=nh(b,c);break;default:d=oh(b,c)}return d}function jh(a,b,c){return a.entries.reduce(function(d,e){e=I(e,b);return null===e?d:null===d?e:c(d,e)},null)}
function lh(a,b){return b instanceof $g?a.entries.length:a.entries.reduce(function(c,d){return c+(null===I(d,b)?0:1)},0)}function mh(a,b){return jh(a,b,function(c,d){return d+c})}function oh(a,b){var c=[];a.entries.forEach(function(d){d=I(d,b);null===d||c.push(d)});return 0==c.length?null:Ib.apply(null,c)}function nh(a,b){var c=0;a=a.entries.reduce(function(d,e){e=I(e,b);if(0==e||null===e)return d;c++;return d+Math.log(e)},0);return 0==c?null:Math.pow(Math.E,a/c)}
function kh(a,b){var c=z();a.entries.forEach(function(d){var e=I(d,b);c.set(e,d)});return new H(A(c),a.o())};function ph(a,b){this.Ga=a;this.Z=b}ph.prototype.Za=h("Ga");ph.prototype.ca=h("Z");function qh(){J.call(this)}u(qh,J);function rh(a,b){J.call(this);this.table=a;this.values=b}u(rh,qh);function sh(a,b){rh.call(this,a,b)}u(sh,rh);function th(a){J.call(this);this.table=a}u(th,qh);th.prototype.toString=function(){return"delete("+this.table.getName()+")"};function uh(a){J.call(this);this.table=a}u(uh,qh);uh.prototype.toString=function(){return"update("+this.table.getName()+")"};
function vh(a){J.call(this);this.N=a}u(vh,qh);vh.prototype.toString=function(){return"select("+this.N.toString()+")"};function wh(a){J.call(this);this.table=a}u(wh,qh);wh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};function xh(){J.call(this)}u(xh,qh);xh.prototype.toString=m("cross_product");function yh(a,b){J.call(this);this.f=a;this.Pb=b}u(yh,qh);
yh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Pb){var b=this.Pb.map(function(c){return c.j()}).join(", ");a+=", groupBy("+b+")"}return a+")"};function zh(a){J.call(this);this.M=a}u(zh,qh);zh.prototype.toString=function(){return"order_by("+Be(this.M)+")"};function Ah(a){J.call(this);this.f=a}u(Ah,qh);Ah.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Bh(a){J.call(this);this.f=a}u(Bh,qh);
Bh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Ch(a){J.call(this);this.W=a}u(Ch,qh);Ch.prototype.toString=function(){return"limit("+this.W+")"};function Dh(a){J.call(this);this.K=a}u(Dh,qh);Dh.prototype.toString=function(){return"skip("+this.K+")"};function Eh(a,b){J.call(this);this.N=a;this.Rb=b}u(Eh,qh);Eh.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", "+this.N.toString()+")"};function Fh(){};function Gh(){}u(Gh,Fh);Gh.prototype.cb=function(a){this.G=a;this.sb(this.G);return this.G};Gh.prototype.sb=function(a){if(a instanceof vh){var b=Hh(this,a.N);b=Ih(this,b);Lg(a,a,b[0],b[1]);a==this.G&&(this.G=b[0]);a=b[0]}M(a).forEach(function(c){this.sb(c)},this)};function Hh(a,b){if(0==M(b).length||"and"!=b.nb)return[b];a=M(b).slice().map(function(c){b.removeChild(c);return Hh(this,c)},a);return Aa(a)}
function Ih(a,b){var c=null,d=null;b.map(function(e,f){e=new vh(e);0==f?c=e:le(d,e);d=e},a);return[c,d]};function Jh(){}u(Jh,Fh);Jh.prototype.cb=function(a,b){if(3>b.from.length)return a;this.G=a;this.sb(this.G);return this.G};Jh.prototype.sb=function(a){if(a instanceof xh)for(;2<M(a).length;){for(var b=new xh,c=0;2>c;c++){var d=me(a,0);le(b,d)}ke(a,b,0)}M(a).forEach(function(e){this.sb(e)},this)};function Kh(){S.call(this,2,0)}u(Kh,S);Kh.prototype.toString=m("cross_product");Kh.prototype.ba=function(a){var b=a[0],c=a[1];a=[];for(var d=b.o(),e=c.o(),f=0;f<b.entries.length;f++)for(var g=0;g<c.entries.length;g++){var k=Wd(b.entries[f],d,c.entries[g],e);a.push(k)}b=b.o().concat(c.o());return[new H(a,b)]};function Lh(a,b){Ee.call(this,a,b);this.Ha=a.b(Gc);this.Fb=a.b(Hc)}u(Lh,Ee);Lh.prototype.getPriority=m(2);Lh.prototype.be=function(a){0==this.F()?Mh(this,a):this.Ic()};function Mh(a,b){a.pd.forEach(function(c,d){c instanceof Ae&&He(this.Fb,c,b[d])},a)}Lh.prototype.Ic=function(){var a=Je(this.Fb,this.ca());0!=a.length&&(a=new Ge(this.global,a),Ke(this.Ha,a))};function Nh(a){ve.call(this,a)}u(Nh,ve);Nh.prototype.ca=function(){var a=C();a.add(this.from);Oh(this,this.from.getName(),a);return a};function Oh(a,b,c){var d=Ph(a.$.info(),b,1);Ph(a.$.info(),b).forEach(c.add.bind(c));d.forEach(function(e){Oh(this,e.getName(),c)},a)}Nh.prototype.clone=function(){var a=new Nh(this.$);ye(a,this);a.from=this.from;return a};Nh.prototype.bind=function(a){Nh.eb.bind.call(this,a);ze(this,a);return this};function Qh(a){ve.call(this,a)}u(Qh,ve);Qh.prototype.ca=function(){var a=C();a.add(this.Ka);var b=this.$.info();Rh(this.Ka.getName(),b.cf).forEach(a.add.bind(a));this.Zb&&Ph(b,this.Ka.getName()).forEach(a.add.bind(a));return a};Qh.prototype.clone=function(){var a=new Qh(this.$);ye(a,this);a.Ka=this.Ka;this.values&&(a.values=this.values instanceof Xd?this.values:this.values.slice());a.Zb=this.Zb;a.$b=this.$b;return a};
Qh.prototype.bind=function(a){Qh.eb.bind.call(this,a);this.$b&&(this.values=this.$b instanceof Xd?a[this.$b.Ba()]:this.$b.map(function(b){return b instanceof Xd?a[b.Ba()]:b}));return this};function Sh(a){ve.call(this,a)}u(Sh,ve);Sh.prototype.ca=function(){var a=C();a.add(this.table);var b=this.set.map(function(d){return d.I.j()}),c=this.$.info();Th(c,b).forEach(a.add.bind(a));Uh(c,b).forEach(a.add.bind(a));return a};Sh.prototype.clone=function(){var a=new Sh(this.$);ye(a,this);a.table=this.table;a.set=this.set?Vh(this.set):this.set;return a};Sh.prototype.bind=function(a){Sh.eb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Qc&&(b.value=a[b.Qc])});ze(this,a);return this};
function Vh(a){return a.map(function(b){var c={},d;for(d in b)c[d]=b[d];return c})};function Wh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+sc(b)+"'";default:return"'"+b.toString()+"'"}}function Xh(a,b){var c=a.Zb?"INSERT OR REPLACE":"INSERT",d=a.Ka.jb();c+=" INTO "+a.Ka.getName()+"(";c+=d.map(function(e){return e.getName()}).join(", ");c+=") VALUES (";return a.values.map(function(e){var f=d.map(function(g){var k=e.l[g.getName()];return b?null!=k?"#":"NULL":Wh(g.F(),k)});return c+f.join(", ")+");"}).join("\n")}
function Yh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Zh(a,b,c,d){return a instanceof Xd?"?"+a.Ba().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(e){return Wh(c,e)}).join(", ")+")":"between"==b?Wh(c,a[0])+" AND "+Wh(c,a[1]):Wh(c,a).toString()}
function $h(a,b){return M(a).map(function(c){return"("+ai(c,b)+")"}).join("and"==a.nb?" AND ":" OR ")}function bi(a){return[a.fa.j(),Yh(a.D),a.ma.j()].join(" ")}function ai(a,b){if(a instanceof re){var c=a.I.j(),d=Yh(a.D);a=Zh(a.value,a.D,a.I.F(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof Ng)return $h(a,b);if(a instanceof Qg)return bi(a);throw new E(357,typeof a);}
function ci(a,b){return(a=ai(a,b))?" WHERE "+a:""}function di(a,b){var c="UPDATE "+a.table.getName()+" SET ";c+=a.set.map(function(d){var e=d.I.j()+" = ";return-1!=d.Qc?e+"?"+d.Qc.toString():e+Wh(d.I.F(),d.value).toString()}).join(", ");a.u&&(c+=ci(a.u,b));return c+";"}
function ei(a,b){var c="*";a.f.length&&(c=a.f.map(function(d){return d.Ja?d.j()+" AS "+d.Ja:d.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.ab&&0!=a.ab.size?c+=fi(a,b):(c+=a.from.map(gi).join(", "),a.u&&(c+=ci(a.u,b)));a.M&&(b=a.M.map(function(d){return d.I.j()+(0==d.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.qa&&(b=a.qa.map(function(d){return d.j()}).join(", "),c+=" GROUP BY "+b);a.W&&(c+=" LIMIT "+a.W.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function gi(a){return Ud(a)!=a.getName()?a.getName()+" AS "+Ud(a):a.getName()}function fi(a,b){for(var c=Gg(a.u,function(k){return k instanceof Qg}),d=c.map(bi),e=gi(a.from[0]),f=1;f<a.from.length;f++){var g=gi(a.from[f]);e=a.ab.has(c[d.length-f].V())?e+(" LEFT OUTER JOIN "+g):e+(" INNER JOIN "+g);e+=" ON ("+d[d.length-f]+")"}a=a.u;a=0<M(a).length?je(a,0):a;a instanceof Qg||(e+=" WHERE "+ai(a,b));return e}
function hi(a,b){b=b||!1;a=a.getQuery();if(a instanceof Qh)return Xh(a,b);if(a instanceof Nh){var c="DELETE FROM "+a.from.getName();a.u&&(c+=ci(a.u,b));return c+";"}if(a instanceof Sh)return di(a,b);if(a instanceof Ae)return ei(a,b);throw new E(358,typeof a);};function T(a,b){this.global=a;this.Kg=a.b(Fc);this.Ha=a.b(Gc);this.query=b}t("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.Xa()}catch(a){return pb(a)}return new w(function(a,b){var c=new Lh(this.global,[this.xc()]);Ke(this.Ha,c).then(function(d){a(Kd(d[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Zf=function(){var a=function(b){return b.Mc(this.query)+"\n"}.bind(this);return Mg(ii(this).Za(),a)};T.prototype.explain=T.prototype.Zf;
T.prototype.bind=function(a){this.query.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Sg=function(a){return hi(this,a)};T.prototype.toSql=T.prototype.Sg;T.prototype.Xa=aa();T.prototype.getQuery=function(){return this.query.clone()};function ii(a){if(null==a.df){var b=a.Kg;var c=a.query,d=b.vg.create(c);b=b.Hg.create(d,c);a.df=b}return a.df}T.prototype.xc=function(){return{context:this.getQuery(),ee:ii(this)}};function ji(a){T.call(this,a,new Nh(a.b(Ic)))}u(ji,T);t("lf.query.DeleteBuilder",ji);ji.prototype.from=function(a){if(null!=this.query.from)throw new E(515);this.query.from=a;return this};ji.prototype.from=ji.prototype.from;ji.prototype.u=function(a){this.Bd();this.query.u=a;return this};ji.prototype.where=ji.prototype.u;ji.prototype.Bd=function(){if(null==this.query.from)throw new E(548);if(null!=this.query.u)throw new E(516);};
ji.prototype.Xa=function(){ji.eb.Xa.call(this);if(null==this.query.from)throw new E(517);};function ki(a,b){T.call(this,a,new Qh(a.b(Ic)));this.query.Zb=b||!1}u(ki,T);t("lf.query.InsertBuilder",ki);ki.prototype.Xa=function(){ki.eb.Xa.call(this);var a=this.query;if(null==a.Ka||null==a.values)throw new E(518);if(a.Zb&&null===a.Ka.Kb.od)throw new E(519);};ki.prototype.Ka=function(a){if(null!=this.query.Ka)throw new E(520);this.query.Ka=a;return this};ki.prototype.into=ki.prototype.Ka;
ki.prototype.values=function(a){if(null!=this.query.values)throw new E(521);a instanceof Xd||a.some(function(b){return b instanceof Xd})?this.query.$b=a:this.query.values=a;return this};ki.prototype.values=ki.prototype.values;function li(a){return mi("and",Array.prototype.slice.call(arguments))}t("lf.op.and",li);t("lf.op.or",function(a){return mi("or",Array.prototype.slice.call(arguments))});function mi(a,b){var c=new Ng(a);b.forEach(function(d){le(c,d)});return c}t("lf.op.not",function(a){a.rd(!0);return a});function U(a,b){T.call(this,a,new Ae(a.b(Ic)));this.Ie=this.wd=!1;this.query.f=b;ni(this);oi(this)}u(U,T);t("lf.query.SelectBuilder",U);U.prototype.Xa=function(){U.eb.Xa.call(this);var a=this.query;if(null==a.from)throw new E(522);if(q(a.Sb)&&!q(a.W)||q(a.Hb)&&!q(a.K))throw new E(523);null!=this.query.qa?pi(this):qi(this)};function ni(a){var b=a.query.f.filter(function(c){return c instanceof R&&"DISTINCT"==c.Jb},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new E(524);}
function pi(a){if(a.query.qa.some(function(b){b=b.F();return 6==b||0==b}))throw new E(525);}function qi(a){var b=a.query.f.some(function(c){return c instanceof R},a);a=a.query.f.some(function(c){return!(c instanceof R)},a)||0==a.query.f.length;if(b&&a)throw new E(526);}function oi(a){a.query.f.forEach(function(b){if(b instanceof R&&!ri(b.Jb,b.F()))throw new E(527,b.j());},a)}function si(a,b){if(null==a.query.from)throw new E(b);}
U.prototype.from=function(a){if(this.Ie)throw new E(515);this.Ie=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.from;U.prototype.u=function(a){si(this,548);if(this.wd)throw new E(516);this.wd=!0;ti(this,a);return this};U.prototype.where=U.prototype.u;function ti(a,b){null!=a.query.u?(b=li(b,a.query.u),a.query.u=b):a.query.u=b}
U.prototype.kg=function(a,b){si(this,542);if(this.wd)throw new E(547);this.query.from.push(a);ti(this,b);return this};U.prototype.innerJoin=U.prototype.kg;U.prototype.sg=function(a,b){si(this,542);if(!(b instanceof Qg))throw new E(541);if(this.wd)throw new E(547);this.query.from.push(a);null==this.query.ab&&(this.query.ab=C());var c=b;Ud(a)!=Ud(b.ma.H())&&(c=b.reverse());this.query.ab.add(c.V());ti(this,c);return this};U.prototype.leftOuterJoin=U.prototype.sg;
U.prototype.W=function(a){if(null!=(this.query.W||this.query.Sb))throw new E(528);if(a instanceof Xd)this.query.Sb=a;else{if(0>a)throw new E(531);this.query.W=a}return this};U.prototype.limit=U.prototype.W;U.prototype.K=function(a){if(null!=(this.query.K||this.query.Hb))throw new E(529);if(a instanceof Xd)this.query.Hb=a;else{if(0>a)throw new E(531);this.query.K=a}return this};U.prototype.skip=U.prototype.K;
U.prototype.M=function(a,b){si(this,549);null==this.query.M&&(this.query.M=[]);this.query.M.push({I:a,order:null!=b?b:1});return this};U.prototype.orderBy=U.prototype.M;U.prototype.qa=function(a){si(this,549);if(null!=this.query.qa)throw new E(530);null==this.query.qa&&(this.query.qa=[]);this.query.qa.push.apply(this.query.qa,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.qa;
function ri(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}U.prototype.clone=function(){var a=new U(this.global,this.query.f);a.query=this.query.clone();a.query.Tc=null;return a};U.prototype.clone=U.prototype.clone;function ui(a,b){T.call(this,a,new Sh(a.b(Ic)));this.query.table=b}u(ui,T);t("lf.query.UpdateBuilder",ui);ui.prototype.set=function(a,b){a={Qc:b instanceof Xd?b.Ba():-1,I:a,value:b};null!=this.query.set?this.query.set.push(a):this.query.set=[a];return this};ui.prototype.set=ui.prototype.set;ui.prototype.u=function(a){this.Bd();this.query.u=a;return this};ui.prototype.where=ui.prototype.u;ui.prototype.Bd=function(){if(null!=this.query.u)throw new E(516);};
ui.prototype.Xa=function(){ui.eb.Xa.call(this);if(null==this.query.set)throw new E(532);if(this.query.set.some(function(a){return a.value instanceof Xd}))throw new E(501);};function vi(a){this.query=a;this.Ga=null}vi.prototype.ec=function(){null===this.Ga&&(this.Ga=this.Yc());return this.Ga};function wi(a){vi.call(this,a)}u(wi,vi);wi.prototype.Yc=function(){return this.query.Zb?new sh(this.query.Ka,this.query.values):new rh(this.query.Ka,this.query.values)};function xi(a){vi.call(this,a)}u(xi,vi);
xi.prototype.Yc=function(){var a=new uh(this.query.table),b=null!=this.query.u?new vh(this.query.u.Lb()):null,c=new wh(this.query.table);null===b?le(a,c):(le(b,c),le(a,b));return a};function yi(a,b,c){this.Ga=a;this.ge=b;this.Vb=c}yi.prototype.ec=function(){this.Vb.forEach(function(a){this.Ga=a.cb(this.Ga,this.ge)},this);return this.Ga};function zi(a,b){vi.call(this,a);this.Vb=b}u(zi,vi);zi.prototype.Yc=function(){var a=new th(this.query.from),b=null!=this.query.u?new vh(this.query.u.Lb()):null,c=new wh(this.query.from);null===b?le(a,c):(le(b,c),le(a,b));return(new yi(a,this.query,this.Vb)).ec()};function Ai(){}u(Ai,Fh);Ai.prototype.cb=function(a,b){if(2>b.from.length)return a;this.G=a;this.sb(this.G,b);return this.G};Ai.prototype.sb=function(a,b){if(a instanceof vh&&a.N instanceof Qg){var c=a.N.V(),d=je(a,0);d instanceof xh&&(c=null!=b.ab&&b.ab.has(c),c=new Eh(a.N,c),Lg(a,d,c,c),a==this.G&&(this.G=c),a=c)}M(a).forEach(function(e){this.sb(e,b)},this)};function Bi(){this.Pc=C()}u(Bi,Fh);Bi.prototype.cb=function(a,b){if(!q(b.u))return a;this.Pc.clear();this.G=a;this.sb(this.G,b);this.Pc.clear();return this.G};Bi.prototype.sb=function(a,b){var c=function(e){M(e).forEach(d)}.bind(this),d=function(e){if(!this.Pc.has(e)){if(e instanceof vh){var f=e.N.o(),g=function(k){return Ci(this,k,f)}.bind(this);g=Di(this,b,e,g);this.Pc.add(e);g!=e&&(null===g.getParent()&&(this.G=g),d(g))}c(e)}}.bind(this);d(a)};
function Di(a,b,c,d){var e=c;if(Ei(b,c))e=Jg(c),Di(a,b,c,d);else if(Fi(c)){var f=[];e=Kg(c,d,function(g){g=new vh(g.N);f.push(g);return g});f.forEach(function(g){Di(this,b,g,d)},a)}return e}function Ci(a,b,c){var d=C();Fg(b).forEach(function(e){d.add(e.table)},a);b instanceof wh&&d.add(b.table);return Jc(d,c)}function Fi(a){a=je(a,0);return a instanceof xh||a instanceof Eh}
function Ei(a,b){var c=je(b,0);if(!(c instanceof vh))return!1;if(null==a.ab)return!0;b=b.N instanceof Qg;a=a.ab.has(c.N.V());return b||!a};function Gi(a,b){vi.call(this,a);this.Vb=b;this.hf=this.Ze=this.rf=this.bf=this.ze=this.Oe=this.qf=this.Fe=this.uf=null}u(Gi,vi);
Gi.prototype.Yc=function(){Hi(this);2<=this.query.from.length&&(this.Fe=new xh);this.qf=null!=this.query.u?new vh(this.query.u.Lb()):null;this.query.M&&(this.bf=new zh(this.query.M));if(null!=this.query.K&&0<this.query.K||null!=this.query.Hb)this.rf=new Dh(this.query.K);null!=this.query.W&&(this.Ze=new Ch(this.query.W));null!=this.query.qa&&(this.Oe=new Bh(this.query.qa));Ii(this);this.hf=new yh(this.query.f||[],this.query.qa||null);var a=Ji(this);return(new yi(a,this.query,this.Vb)).ec()};
function Ji(a){for(var b=[a.Ze,a.rf,a.hf,a.bf,a.ze,a.Oe,a.qf,a.Fe],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:le(b[c],f),c=e)}a.uf.forEach(function(g){le(b[c],g)});return d}function Hi(a){a.uf=a.query.from.map(function(b){return new wh(b)},a)}function Ii(a){var b=a.query.f.filter(function(c){return c instanceof R});null!=a.query.M&&a.query.M.forEach(function(c){c.I instanceof R&&b.push(c.I)});0<b.length&&(a.ze=new Ah(b))};function Ki(){this.me=[new Gh,new Jh,new Bi,new Ai];this.Ld=[new Gh]}Ki.prototype.create=function(a){if(a instanceof Qh)var b=new wi(a);else if(a instanceof Nh)b=new zi(a,this.Ld);else if(a instanceof Ae)b=new Gi(a,this.me);else if(a instanceof Sh)b=new xi(a);else throw new E(513);b=b.ec();return new ph(b,a.ca())};function Li(a){S.call(this,1,1);this.S=a}u(Li,S);Li.prototype.toString=function(){return"delete("+this.S.getName()+")"};Li.prototype.ba=function(a,b){a=a[0].entries.map(function(c){return c.ta});b.remove(this.S,a);return[Od()]};function Mi(a,b){S.call(this,0,-1);this.table=b;this.A=a.b(Ec)}u(Mi,S);Mi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Mi.prototype.ba=function(){var a=this.A.get(nf(this.table)),b=new H([],[this.table.getName()]),c=ah();a=a.X().ha;null===b.Wa&&(b.Wa=z());b.Wa.set(c.j(),a);return[b]};function Ni(a,b){S.call(this,0,-1);this.U=a.b(Dc);this.A=a.b(Ec);this.table=b}u(Ni,S);Ni.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};Ni.prototype.ba=function(){var a=this.A.get(nf(this.table)).Ra();return[Rd(Ef(this.U,a),[Ud(this.table)])]};function Oi(a){this.c=a}u(Oi,Fh);Oi.prototype.cb=function(a,b){this.G=a;if(!this.Dd(b))return a;a=Gg(a,function(c){return c instanceof Ni})[0];b=new Mi(this.c,a.table);Lg(a,a,b,b);return this.G};Oi.prototype.Dd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.u&&null==a.W&&null==a.K&&null==a.qa?(a=a.f[0],a instanceof R&&"COUNT"==a.Jb&&a.child instanceof $g):!1};function Pi(a){S.call(this,1,1);this.Ne=a}u(Pi,S);Pi.prototype.toString=function(){return"groupBy("+this.Ne.map(function(a){return a.j()}).toString()+")"};Pi.prototype.ba=function(a){return Qi(this,a[0])};function Qi(a,b){var c=new dd,d=function(e){return this.Ne.map(function(f){return I(e,f)},this).join(",")}.bind(a);b.entries.forEach(function(e){c.set(d(e),e)},a);return c.keys().map(function(e){return new H(c.get(e),b.o())},a)};function Ri(a,b,c){S.call(this,2,0);this.A=a.b(Ec);this.U=a.b(Dc);this.N=b;this.Rb=c;this.zd="eq"==this.N.D?0:2;this.Qe=null}u(Ri,S);var Si=["hash","index_nested_loop","nested_loop"];Ri.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", impl: "+Si[this.zd]+", "+this.N.toString()+")"};
Ri.prototype.ba=function(a){switch(this.zd){case 0:return[Ug(this.N,a[0],a[1],this.Rb)];case 1:return[Vg(this.N,a[0],a[1],this.Qe,this.U)];default:var b=this.N,c=a[0];a=a[1];var d=this.Rb,e=[c,a];d||(e=Rg(b,c,a));c=e[0];a=e[1];e=[];for(var f=c.o(),g=a.o(),k=c.entries.length,l=a.entries.length,p=l+256-1>>8,r=0;r<p;){for(var W=0;W<k;W++){var K=!1,y=I(c.entries[W],b.fa);if(null!==y)for(var L=Math.min(r+1<<8,l),V=r<<8;V<L;V++)if(b.sc(y,I(a.entries[V],b.ma))){K=!0;var ma=Wd(c.entries[W],f,a.entries[V],
g);e.push(ma)}d&&!K&&e.push(Tg(b,c.entries[W],f))}r++}b=c.o().concat(a.o());return[new H(e,b)]}};function Ti(a,b){a.zd=1;var c=a.A.get(b.Ba().j());a.Qe={gg:b,zg:b==a.N.fa?a.N.ma:a.N.fa,index:c}};function Ui(a){S.call(this,-1,-1);this.jf=a}u(Ui,S);Ui.prototype.toString=function(){return"no_op_step("+this.jf[0].o().join(",")+")"};Ui.prototype.ba=h("jf");function Vi(){}u(Vi,Fh);Vi.prototype.cb=function(a,b){this.G=a;if(!this.Dd(b))return a;Gg(a,function(c){return c instanceof Ri}).forEach(this.Jg,this);return this.G};Vi.prototype.Dd=function(a){return 1<a.from.length};
Vi.prototype.Jg=function(a){if("eq"==a.N.D&&!a.Rb){var b=function(e){if(!(e instanceof Ni))return null;e=Ud(e.table)==Ud(a.N.ma.H())?a.N.ma:a.N.fa;return null===e.Ba()?null:e},c=b(je(a,0));b=b(je(a,1));if(null!==c||null!==b){b=null===b?c:b;Ti(a,b);var d=new H([],[Ud(b.H())]);ne(a,new Ui([d]),b==c?0:1)}}};function Wi(a){a=a.map(function(c){return c.Ob()});a=Nb.apply(null,a);var b=[];Mb(a,function(c){b.push(c)});return b}function Xi(a){this.Qb=a}Xi.prototype.Zc=function(){return 1==this.Qb.f.length?[Ed()]:[this.Qb.f.map(function(){return Ed()})]};function Yi(a,b){this.Qb=a;this.Fa=b;this.Hd=this.Xe=null}
function Zi(a,b){var c=z();a.Fa.keys().forEach(function(d){var e=this.Fa.get(d).map(function(g){return we(b,g)},this),f=new Id([Ed()]);e.forEach(function(g){f=Jd(f,g.re())});c.set(d,f)},a);return c}Yi.prototype.Zc=function(a){if(this.Xe==a)return this.Hd;for(var b=Zi(this,a),c=this.Qb.f.length-1;0<=c;c--){var d=this.Qb.f[c];if(null!==(b.get(d.$.getName())||null))break;b.set(d.$.getName(),new Id([Ed()]))}this.Hd=1==this.Qb.f.length?A(b)[0].Ob():Wi($i(this,b));this.Xe=a;return this.Hd};
function $i(a,b){var c=z(),d=0;a.Qb.f.forEach(function(e){c.set(e.$.getName(),d);d++});return nc(b).sort(function(e,f){return c.get(e)-c.get(f)}).map(function(e){return b.get(e)})};function aj(a,b){this.td=b;this.A=a.b(Ec)}function bj(a){a=a.A.get(nf(a.td));return Math.floor(.02*a.X().ha)}function cj(a,b,c){c=c.filter(a.ng,a);if(0==c.length)return null;a=dj(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(e,f){var g=ej(f,b);return g<d?(d=g,f):e},null)}
function dj(a,b){return a.td.Ca().map(function(c){c=new fj(this.A,c);gj(c,b);return c},a).filter(function(c){if(null===c.Fa)c=!1;else{for(var d=!1,e=!0,f=0;f<c.$a.f.length;f++){var g=c.Fa.has(c.$a.f[f].$.getName());if(d&&g){e=!1;break}g||(d=!0)}c=e}return c})}aj.prototype.ng=function(a){return a instanceof re?!a.gd()||a.I.H()!=this.td||"in"==a.D&&a.value.length>bj(this)?!1:!0:a instanceof Ng?a.gd()&&je(a,0).I.H()==this.td?M(a).length<=bj(this):!1:!1};
function fj(a,b){this.A=a;this.$a=b;this.hg=C(this.$a.f.map(function(c){return c.$.getName()}));this.Wd=this.Fa=null}function hj(a){null===a.Wd&&(a.Wd=new Yi(a.$a,a.Fa));return a.Wd}function gj(a,b){b.forEach(function(c){var d=c.jb()[0].getName();this.hg.has(d)&&(null===this.Fa&&(this.Fa=new dd),this.Fa.set(d,c.V()))},a)}function ej(a,b){b=hj(a).Zc(b);var c=a.A.get(a.$a.j());return b.reduce(function(d,e){return d+c.Wc(e)},0)};function ij(a,b,c,d){S.call(this,0,-1);this.A=a.b(Ec);this.index=b;this.We=c;this.ke=d;this.Oc=this.Nc=!1}u(ij,S);ij.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.ke?"reverse":"natural")+(this.Nc?", limit:?":"")+(this.Oc?", skip:?":"")+")"};ij.prototype.Mc=function(a){var b=this.toString(),c=this.We.Zc(a);b=b.replace("?",c.toString());this.Nc&&(b=b.replace("?",a.W.toString()));this.Oc&&(b=b.replace("?",a.K.toString()));return b};
ij.prototype.ba=function(a,b,c){a=this.We.Zc(c);b=this.A.get(this.index.j());c=(1==a.length&&a[0]instanceof F&&Fd(a[0])?If(b.get(a[0].from),!1,this.Nc?c.W:void 0,this.Oc?c.K:void 0):b.Ra(a,this.ke,this.Nc?c.W:void 0,this.Oc?c.K:void 0)).map(function(d){return new oc(d,{})},this);return[Rd(c,[this.index.kc])]};function jj(){S.call(this,-1,0)}u(jj,S);jj.prototype.toString=m("multi_index_range_scan()");
jj.prototype.ba=function(a){var b=z();a.forEach(function(d){d.entries.forEach(function(e){b.set(e.ta.id(),e)})});var c=A(b);return[new H(c,a[0].o())]};function kj(a){S.call(this,1,1);this.hc=a}u(kj,S);kj.prototype.toString=m("select(?)");kj.prototype.Mc=function(a){a=we(a,this.hc);return this.toString().replace("?",a.toString())};kj.prototype.ba=function(a,b,c){return[we(c,this.hc).eval(a[0])]};function lj(a,b){S.call(this,1,1);this.U=a.b(Dc);this.S=b}u(lj,S);lj.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};lj.prototype.ba=function(a){return[Rd(Ef(this.U,Ld(a[0])),[Ud(this.S)])]};function mj(a){this.c=a}u(mj,Fh);mj.prototype.cb=function(a,b){this.G=a;Gg(a,function(c){return c instanceof Ni}).forEach(function(c){var d=nj(c);if(0!=d.length){var e=cj(new aj(this.c,c.table),b,d.map(function(g){return we(b,g.hc)}));if(null!==e){var f=z();d.forEach(function(g){f.set(g.hc,g)},this);this.G=oj(this,e,f,c)}}},this);return this.G};function nj(a){var b=[];for(a=a.getParent();a;){if(a instanceof kj)b.push(a);else if(a instanceof Ri)break;a=a.getParent()}return b}
function oj(a,b,c,d){(null===b.Fa?[]:b.Fa.values()).map(function(e){return c.get(e)}).forEach(Hg);b=new ij(a.c,b.$a,hj(b),!1);a=new lj(a.c,d.table);le(a,b);Lg(d,d,a,b);return b.Za()};function pj(a,b){S.call(this,0,-1);this.A=a.b(Ec);this.S=b}u(pj,S);pj.prototype.toString=function(){return"insert("+this.S.getName()+")"};pj.prototype.ba=function(a,b,c){qj(this.S,c.values,this.A);b.zb(this.S,c.values);return[Rd(c.values,[this.S.getName()])]};function qj(a,b,c){a=a.Kb.od;if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].$.getName();c=c.get(a.j()).X().Bc;var e=null===c?0:c;b.forEach(function(f){if(0==f.l[d]||null==f.l[d])e++,f.l[d]=e})}}
function rj(a,b){S.call(this,0,-1);this.A=a.b(Ec);this.S=b}u(rj,S);rj.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};rj.prototype.ba=function(a,b,c){qj(this.S,c.values,this.A);b.Sd(this.S,c.values);return[Rd(c.values,[this.S.getName()])]};function sj(){S.call(this,1,1)}u(sj,S);sj.prototype.toString=m("limit(?)");sj.prototype.Mc=function(a){return this.toString().replace("?",a.W.toString())};sj.prototype.ba=function(a,b,c){a[0].entries.splice(c.W);return a};function tj(a){S.call(this,-1,1);this.M=a}u(tj,S);n=tj.prototype;n.toString=function(){return"order_by("+Be(this.M)+")"};n.ba=function(a){if(1==a.length){var b=a[0];for(var c=null,d=0;d<this.M.length;d++){var e=bh(this.M[d].I);if(null!==b.Wa&&b.Wa.has(e.j())){c=e;break}}b=c;(null===b?a[0]:Md(a[0],b)).entries.sort(this.Wf.bind(this))}else a.sort(this.Mg.bind(this));return a};
n.Y=function(a,b){var c=-1;do{c++;var d=this.M[c].I;var e=this.M[c].order;var f=a(d);d=b(d)}while(f==d&&c+1<this.M.length);a=f<d?-1:f>d?1:0;return 1==e?a:-a};n.Mg=function(a,b){return this.Y(function(c){return c instanceof R?Md(a,c):I(a.entries[a.entries.length-1],c)},function(c){return c instanceof R?Md(b,c):I(b.entries[b.entries.length-1],c)})};n.Wf=function(a,b){return this.Y(function(c){return I(a,c)},function(c){return I(b,c)})};function uj(a,b){this.Ma=a;this.J=b}function vj(a){return a.J.some(function(b){return b instanceof R},a)?wj(a):xj(a)}function wj(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Jb)return a=Md(a.Ma,a.J[0]).entries.map(function(c){var d=new Sd(new oc(-1,{}),1<this.Ma.L.size);Vd(d,this.J[0],I(c,this.J[0].child));return d},a),new H(a,[]);var b=new Sd(new oc(-1,{}),1<a.Ma.L.size);a.J.forEach(function(c){var d=c instanceof R?Md(this.Ma,c):I(this.Ma.entries[0],c);Vd(b,c,d)},a);return new H([b],a.Ma.o())}
function xj(a){var b=Array(a.Ma.entries.length),c=1<a.Ma.L.size;a.Ma.entries.forEach(function(d,e){b[e]=new Sd(new oc(d.ta.id(),{}),c);this.J.forEach(function(f){Vd(b[e],f,I(d,f))},this)},a);return new H(b,a.Ma.o())}function yj(a,b){var c=a.map(function(d){return vj(new uj(d,b)).entries[0]});return new H(c,a[0].o())};function zj(a,b){S.call(this,-1,1);this.f=a;this.Pb=b}u(zj,S);zj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Pb){var b=this.Pb.map(function(c){return c.j()}).join(", ");a+=", groupBy("+b+")"}return a+")"};zj.prototype.ba=function(a){0==a.length?a=[Od()]:1==a.length?(a=a[0],a=[0==this.f.length?a:vj(new uj(a,this.f))]):a=[yj(a,this.f)];return a};function Aj(a){return a.f.some(function(b){return b instanceof R})||null!==a.Pb};function Bj(){S.call(this,1,1)}u(Bj,S);Bj.prototype.toString=m("skip(?)");Bj.prototype.Mc=function(a){return this.toString().replace("?",a.K.toString())};Bj.prototype.ba=function(a,b,c){return[new H(a[0].entries.slice(c.K),a[0].o())]};function Cj(){}u(Cj,Fh);Cj.prototype.cb=function(a,b){if(!q(b.W)&&!q(b.K))return a;var c=Dj(a);if(null===c)return a;Gg(a,function(d){return d instanceof sj||d instanceof Bj}).forEach(function(d){d instanceof sj?c.Nc=!0:c.Oc=!0;Hg(d)},this);return c.Za()};function Dj(a){a=Gg(a,function(b){return b instanceof ij},function(b){return b instanceof zj&&Aj(b)||b instanceof tj||1!=M(b).length||b instanceof kj});return 0<a.length?a[0]:null};function Ej(a){this.c=a}u(Ej,Fh);Ej.prototype.cb=function(a,b){this.G=a;var c=Fj(this,b);if(0==c.length)return this.G;var d=0;do{var e=c[d++];a=Gj(this,e,b)}while(null===a&&d<c.length);if(null===a)return this.G;b=Hj(this,a[0].$a.kc);return null===b?this.G:this.G=Ij(this,e,b,a)};function Fj(a,b){return Gg(a.G,function(c){if(!(c instanceof kj))return!1;c=we(b,c.hc);return c instanceof Ng&&"or"==c.nb})}
function Hj(a,b){return Gg(a.G,function(c){return c instanceof Ni&&c.table.getName()==b})[0]||null}function Gj(a,b,c){b=we(c,b.hc);var d=b.o();if(1!=d.size)return null;d=D(d)[0];var e=new aj(a.c,d),f=null;return M(b).every(function(g){g=cj(e,c,[g]);null===g||(null===f?f=[g]:f.push(g));return null!==g})?f:null}function Ij(a,b,c,d){var e=new lj(a.c,c.table),f=new jj;le(e,f);d.forEach(function(g){g=new ij(this.c,g.$a,hj(g),!1);le(f,g)},a);Hg(b);Lg(c,c,e,f);return f.Za()};function Jj(a){this.c=a}u(Jj,Fh);Jj.prototype.cb=function(a,b){b=Kj(a,b);if(null===b)return a;a:{var c=b;a=Lj(je(b,0));if(null!==a){var d=b.M;for(var e=null,f=a.table.Ca(),g=0;g<f.length&&null===e;g++)e=Mj(f[g],d);d=e;if(null===d){a=c;break a}c=new ij(this.c,d.$a,new Xi(d.$a),d.Te);d=new lj(this.c,a.table);le(d,c);Hg(b);c=Lg(a,a,d,c)}a=c}a==b&&(a=b,c=Nj(je(b,0)),null!==c&&(d=Mj(c.index,b.M),null!==d&&(c.ke=d.Te,a=Hg(b).parent)));return a.Za()};
function Nj(a){a=Gg(a,function(b){return b instanceof ij},function(b){return 1!=M(b).length});return 0<a.length?a[0]:null}function Lj(a){a=Gg(a,function(b){return b instanceof Ni},function(b){return 1!=M(b).length});return 0<a.length?a[0]:null}function Kj(a,b){return q(b.M)?Gg(a,function(c){return c instanceof tj})[0]:null}function Mj(a,b){if(a.f.length!=b.length||!b.every(function(c,d){return c.I.getName()==a.f[d].$.getName()}))return null;b=Oj(b,a);return b[0]||b[1]?{$a:a,Te:b[1]}:null}
function Oj(a,b){var c=a.reduce(function(e,f){return e<<1|(0==f.order?0:1)},0),d=b.f.reduce(function(e,f){return e<<1|(0==f.order?0:1)},0);c^=d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function Pj(a,b,c){this.Ga=a;this.ge=b;this.Vb=c}Pj.prototype.ec=function(){this.Vb.forEach(function(a){this.Ga=a.cb(this.Ga,this.ge)},this);return this.Ga};function Qj(a){S.call(this,1,1);this.S=a}u(Qj,S);Qj.prototype.toString=function(){return"update("+this.S.getName()+")"};Qj.prototype.ba=function(a,b,c){a=a[0].entries.map(function(d){var e=this.S.ib(d.ta.Ia());c.set.forEach(function(f){e.l[f.I.getName()]=f.value},this);return e},this);b.update(this.S,a);return[Od()]};function Rj(a){this.c=a;this.me=[new Vi,new mj(this.c),new Ej(this.c),new Jj(this.c),new Cj,new Oi(this.c)];this.Ld=[new mj(this.c)]}Rj.prototype.create=function(a,b){var c=a.Za();if(c instanceof sh||c instanceof rh)return Sj(this,a,b);if(c instanceof yh||c instanceof Ch||c instanceof Dh)return Sj(this,a,b,this.me);if(c instanceof th||c instanceof uh)return Sj(this,a,b,this.Ld);throw new E(8);};
function Sj(a,b,c,d){a=Eg(b.Za(),a.yg.bind(a));null!=d&&(a=(new Pj(a,c,d)).ec());return new Ce(a,b.ca())}
Rj.prototype.yg=function(a){if(a instanceof yh)return new zj(a.f,a.Pb);if(a instanceof Bh)return new Pi(a.f);if(a instanceof Ah)return new fh(a.f);if(a instanceof zh)return new tj(a.M);if(a instanceof Dh)return new Bj;if(a instanceof Ch)return new sj;if(a instanceof vh)return new kj(a.N.V());if(a instanceof xh)return new Kh;if(a instanceof Eh)return new Ri(this.c,a.N,a.Rb);if(a instanceof wh)return new Ni(this.c,a.table);if(a instanceof th)return new Li(a.table);if(a instanceof uh)return new Qj(a.table);
if(a instanceof sh)return new rj(this.c,a.table);if(a instanceof rh)return new pj(this.c,a.table);throw new E(514);};function Tj(a){this.vg=new Ki;this.Hg=new Rj(a)};function Uj(){this.$e=z()}function Vj(a,b){var c=a.$e.get(b.getName())||null;null===c&&(c=new Wj,a.$e.set(b.getName(),c));return c}function Xj(a,b,c,d){c.forEach(function(e){e=Vj(this,e);0==d?(e.bb=null,e.tc=b):3==d?(null===e.Xb&&(e.Xb=C()),e.Xb.add(b),null===e.Ua&&(e.Ua=C()),e.Ua.delete(b)):1==d?(null===e.Ua&&(e.Ua=C()),e.Ua.add(b)):2==d&&(e.bb=b)},a)}
function Yj(a,b,c,d){var e=!0;c.forEach(function(f){if(e){f=Vj(this,f);var g=null===f.Ua||0==f.Ua.size;e=0==d?(null===f.Xb||0==f.Xb.size)&&g&&null===f.tc&&null!==f.bb&&f.bb==b:3==d?null===f.tc&&null===f.bb&&null!==f.Ua&&f.Ua.has(b):1==d?null===f.bb:g&&(null===f.bb||f.bb==b)}},a);return e}function Zj(a,b,c,d){var e=Yj(a,b,c,d);e&&Xj(a,b,c,d);return e}Uj.prototype.releaseLock=function(a,b){b.forEach(function(c){Vj(this,c).releaseLock(a)},this)};
function ak(a,b){b.forEach(function(c){Vj(this,c).bb=null},a)}function Wj(){this.Xb=this.Ua=this.bb=this.tc=null}Wj.prototype.releaseLock=function(a){this.tc==a&&(this.tc=null);this.bb==a&&(this.bb=null);null===this.Ua||this.Ua.delete(a);null===this.Xb||this.Xb.delete(a)};function bk(){this.Ub=new ck;this.Ac=new Uj}function Ke(a,b){(2>b.getPriority()||2>b.getPriority())&&ak(a.Ac,b.ca());a.Ub.zb(b);dk(a);return b.Cb.ga}function dk(a){for(var b=a.Ub.Ob(),c=0;c<b.length;c++){var d=b[c];if(0==d.F()?ek(a,d,1,3):ek(a,d,2,0)){a.Ub.remove(d);var e=a;d.exec().then(e.Eg.bind(e,d),e.Dg.bind(e,d))}}}function ek(a,b,c,d){var e=!1;Zj(a.Ac,b.V(),b.ca(),c)&&(e=Zj(a.Ac,b.V(),b.ca(),d));return e}bk.prototype.Eg=function(a,b){this.Ac.releaseLock(a.V(),a.ca());a.Cb.resolve(b);dk(this)};
bk.prototype.Dg=function(a,b){this.Ac.releaseLock(a.V(),a.ca());a.Cb.reject(b);dk(this)};function ck(){this.Ub=[]}ck.prototype.zb=function(a){Hf(this.Ub,a,function(b,c){var d=b.getPriority()-c.getPriority();return 0==d?b.V()-c.V():d})};ck.prototype.Ob=function(){return this.Ub.slice()};ck.prototype.remove=function(a){var b=this.Ub;a=ta(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function fk(){this.Jc=z()}var gk;function hk(){gk||(gk=new fk);return gk}fk.prototype.clear=function(){this.Jc.clear()};fk.prototype.clear=fk.prototype.clear;fk.prototype.pb=function(a,b){this.Jc.set(a.toString(),b);return b};fk.prototype.registerService=fk.prototype.pb;fk.prototype.b=function(a){var b=this.Jc.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};fk.prototype.getService=fk.prototype.b;fk.prototype.hd=function(a){return this.Jc.has(a.toString())};
fk.prototype.isRegistered=fk.prototype.hd;function ik(){var a=hk();return nc(a.Jc)};function jk(a,b,c,d){return null!=a?null!=b?kk(a,b,c,d):lk(a):mk()}function nk(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function ok(a){var b=hk();a=new Bc("ns_"+a);return b.hd(a)?b.b(a):null}function mk(){var a={};ik().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=ok(b).b(Ic).version())});return nk(a)}function lk(a){a=ok(a);var b={};if(null!=a){var c=a.b(Ec);a.b(Ic).oa().forEach(function(d){b[d.getName()]=c.get(nf(d)).X().ha})}return nk(b)}
function kk(a,b,c,d){var e=ok(a);a=[];if(null!=e){var f=null;try{f=e.b(Ic).table(b)}catch(g){}null!=f&&(b=e.b(Ec),e=e.b(Dc),c=b.get(nf(f)).Ra(void 0,!1,c,d),c.length&&(a=Ef(e,c).map(function(g){return g.l})))}return nk(a)};function pk(a,b){this.Md=fe();this.he=a;this.kd=b;this.J=qk(this)}function qk(a){if(0<a.he.f.length)return a.he.f;var b=[];a.he.from.forEach(function(c){c.jb().forEach(function(d){b.push(d)})});return b}pk.prototype.Y=function(a,b){return this.J.every(function(c){return 6==c.F()||0==c.F()?I(a,c)===I(b,c):ge(this.Md,c.F(),"eq")(I(a,c),I(b,c))},this)};
function rk(a,b,c){var d=null===b?[]:b.entries,e=Eb(d,c.entries,a.Y.bind(a),function(l){return d[l]});b=[];for(var f=0,g=0;g<d.length;g++){var k=d[g];e[f]==k?f++:(k=a.kd.splice(f,1),k=sk(g,k,0,a.kd),b.push(k))}e=Eb(d,c.entries,a.Y.bind(a),function(l,p){return c.entries[p]});for(g=f=0;g<c.entries.length;g++)k=c.entries[g],e[f]==k?f++:(a.kd.splice(g,0,k.ta.l),k=sk(g,[],1,a.kd),b.push(k));return b}function sk(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function tk(){this.dc=z()}tk.prototype.yd=function(a,b){var c=ka(a.query).toString(),d=this.dc.get(c)||null;null===d&&(d=new uk(a),this.dc.set(c,d));d.yd(b)};tk.prototype.ie=function(a,b){a=ka(a.query).toString();var c=this.dc.get(a)||null;c.ie(b);0<c.Dc.size||this.dc.delete(a)};function Je(a,b){var c=C();b.forEach(function(e){c.add(e.getName())});var d=[];a.dc.forEach(function(e){e=e.xc();e.context.from.some(function(f){return c.has(f.getName())})&&d.push(e)});return d}
function He(a,b,c){b=ka(null!=b.Tc?b.Tc:b).toString();a=a.dc.get(b)||null;null!==a&&vk(a,c)}function uk(a){this.Kf=a;this.Dc=C();this.Bg=[];this.Ye=null;this.Uf=new pk(a.query,this.Bg)}uk.prototype.yd=function(a){this.Dc.has(a)||this.Dc.add(a)};uk.prototype.ie=function(a){this.Dc.delete(a)};uk.prototype.xc=function(){var a=this.Kf;return{context:a.query,ee:ii(a)}};function vk(a,b){var c=rk(a.Uf,a.Ye,b);a.Ye=b;0<c.length&&a.Dc.forEach(function(d){d(c)})};function wk(a,b){var c=a.b(Ic),d=b||{};b=new Df(c);a.pb(Dc,b);b=null;var e=!1;null!=d.storeType?b=d.storeType:(q(mc)||(mc=new lc),b=mc,b=b.ig?0:b.Xg?4:1);switch(b){case 0:b=new hf(a,c);break;case 1:b=new qf(c);break;case 5:b=new sf(c);break;case 4:b=new Af(a,c,d.webSqlDbSize);break;case 3:b=new We(c,d.firebase);e=!0;break;default:throw new E(300);}a.pb(Cc,b);var f=new Dg;a.pb(Ec,f);return b.Da(d.onUpgrade).then(function(){var g=new Tj(a);a.pb(Fc,g);g=new bk;a.pb(Gc,g);g=new tk;a.pb(Hc,g);return f.Da(c)}).then(function(){if(e){var g=
new Le(a);g.Ya.subscribe(g.$d.bind(g))}d.enableInspector&&(window.top["#lfInspect"]=jk);return(new wg(a)).Da(c)})};function xk(a){this.c=a;this.g=a.b(Ic);this.Z=C(this.g.oa());this.Cb=tb()}function yk(a){var b=a.c.b(Ec),c=a.c.b(Dc),d={};a.g.oa().forEach(function(e){var f=b.get(nf(e)).Ra();f=Ef(c,f).map(function(g){return g.l});d[e.getName()]=f});return{name:a.g.name(),version:a.g.version(),tables:d}}n=xk.prototype;n.exec=function(){var a=yk(this);a=new Sd(new oc(-1,a),!0);return x([new H([a],[])])};n.F=m(0);n.ca=h("Z");n.V=function(){return ka(this)};n.getPriority=m(0);function zk(a,b){this.c=a;this.g=a.b(Ic);this.Z=C(this.g.oa());this.Cb=tb();this.Aa=b;this.Ya=a.b(Cc);this.U=a.b(Dc);this.A=a.b(Ec)}n=zk.prototype;n.exec=function(){if(!this.Ya.Lc())throw new E(300);a:{var a=this.g.oa();for(var b=0;b<a.length;++b)if(0<this.A.get(nf(a[b])).X().ha){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.g.name()!=this.Aa.name||this.g.version()!=this.Aa.version)throw new E(111);if(null==this.Aa.tables)throw new E(112);return Ak(this)};n.F=m(1);n.ca=h("Z");n.V=function(){return ka(this)};
n.getPriority=m(0);function Ak(a){var b=new vd(a.c,a.Z);b=a.Ya.Db(a.F(),D(a.Z),b);for(var c in a.Aa.tables){var d=a.g.table(c),e=a.Aa.tables[c].map(function(k){return d.vb(k)}),f=b.H(c,d.ib,0);a.U.Wb(c,e);var g=a.A.jc.get(c)||[];e.forEach(function(k){g.forEach(function(l){var p=k.lb(l.getName());l.add(p,k.id())})});f.put(e)}return b.ja()};function Bk(a,b){this.c=a;this.Ya=a.b(Cc);this.Ha=a.b(Gc);this.Fb=a.b(Hc);this.Z=C(b);this.Oa=new vd(this.c,this.Z);this.Cb=tb();this.uc=tb();this.ve=tb()}n=Bk.prototype;n.exec=function(){this.ve.resolve();return this.uc.ga};n.F=m(1);n.ca=h("Z");n.V=function(){return ka(this)};n.getPriority=m(2);function Ck(a){Ke(a.Ha,a);return a.ve.ga}
function Dk(a,b){b=b.xc();return b.ee.Za().exec(a.Oa,b.context).then(function(c){return Kd(c[0])},function(c){this.Oa.Gb();var d=new yb(c.name);this.uc.reject(d);throw c;}.bind(a))}n.ja=function(){this.ia=this.Ya.Db(this.F(),D(this.Z),this.Oa);this.ia.ja().then(function(){this.Ic();this.uc.resolve()}.bind(this),function(a){this.Oa.Gb();this.uc.reject(a)}.bind(this));return this.Cb.ga};n.Gb=function(){this.Oa.Gb();this.uc.resolve();return this.Cb.ga};
n.Ic=function(){var a=Je(this.Fb,this.Z);0!=a.length&&(a=new Ge(this.c,a),Ke(this.Ha,a))};n.X=function(){var a=null;null!=this.ia&&(a=this.ia.X());return null===a?new B(!1,0,0,0,0):a};function Ek(a){this.c=a;this.Ha=a.b(Gc);this.Ib=null;this.Qa=0;0==Fk.size&&(Fk.set(0,C([1,4])),Fk.set(1,C([2])),Fk.set(2,C([3,5,6])),Fk.set(3,C([2,7])),Fk.set(4,C([7])),Fk.set(5,C([7])),Fk.set(6,C([7])))}t("lf.proc.Transaction",Ek);var Fk=z();function Gk(a,b){var c=Fk.get(a.Qa)||null;if(null===c||!c.has(b))throw new E(107,a.Qa,b);a.Qa=b}
Ek.prototype.exec=function(a){Gk(this,4);var b=[];try{a.forEach(function(c){c.Xa();b.push(c.xc())},this)}catch(c){return Gk(this,7),pb(c)}this.Ib=new Lh(this.c,b);return Ke(this.Ha,this.Ib).then(function(c){Gk(this,7);return c.map(function(d){return Kd(d)})}.bind(this),function(c){Gk(this,7);throw c;}.bind(this))};Ek.prototype.exec=Ek.prototype.exec;Ek.prototype.If=function(a){Gk(this,1);this.Ib=new Bk(this.c,a);return Ck(this.Ib).then(function(){Gk(this,2)}.bind(this))};Ek.prototype.begin=Ek.prototype.If;
Ek.prototype.Hf=function(a){Gk(this,3);try{a.Xa()}catch(b){return Gk(this,7),pb(b)}return Dk(this.Ib,a).then(function(b){Gk(this,2);return b}.bind(this),function(b){Gk(this,7);throw b;}.bind(this))};Ek.prototype.attach=Ek.prototype.Hf;Ek.prototype.ja=function(){Gk(this,5);return this.Ib.ja().then(function(){Gk(this,7)}.bind(this))};Ek.prototype.commit=Ek.prototype.ja;Ek.prototype.Gb=function(){Gk(this,6);return this.Ib.Gb().then(function(){Gk(this,7)}.bind(this))};Ek.prototype.rollback=Ek.prototype.Gb;
Ek.prototype.X=function(){if(7!=this.Qa)throw new E(105);return this.Ib.X()};Ek.prototype.stats=Ek.prototype.X;function X(a){this.c=a;this.g=a.b(Ic);this.ed=!1}t("lf.proc.Database",X);X.prototype.Da=function(a){this.c.pb(Ic,this.g);return wk(this.c,a).then(function(){this.ed=!0;this.Ha=this.c.b(Gc);return this}.bind(this))};X.prototype.init=X.prototype.Da;X.prototype.xb=h("g");X.prototype.getSchema=X.prototype.xb;function Hk(a){if(!a.ed)throw new E(2);}X.prototype.select=function(a){Hk(this);return new U(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
X.prototype.select=X.prototype.select;X.prototype.zb=function(){Hk(this);return new ki(this.c)};X.prototype.insert=X.prototype.zb;X.prototype.Sd=function(){Hk(this);return new ki(this.c,!0)};X.prototype.insertOrReplace=X.prototype.Sd;X.prototype.update=function(a){Hk(this);return new ui(this.c,a)};X.prototype.update=X.prototype.update;X.prototype.delete=function(){Hk(this);return new ji(this.c)};X.prototype["delete"]=X.prototype.delete;
X.prototype.observe=function(a,b){Hk(this);this.c.b(Hc).yd(a,b)};X.prototype.observe=X.prototype.observe;X.prototype.unobserve=function(a,b){Hk(this);this.c.b(Hc).ie(a,b)};X.prototype.unobserve=X.prototype.unobserve;X.prototype.Qf=function(){Hk(this);return new Ek(this.c)};X.prototype.createTransaction=X.prototype.Qf;X.prototype.close=function(){try{this.c.b(Cc).close()}catch(a){}this.c.clear();this.ed=!1};X.prototype.close=X.prototype.close;
X.prototype.$f=function(){Hk(this);var a=new xk(this.c);return Ke(this.Ha,a).then(function(b){return Kd(b[0])[0]})};X.prototype["export"]=X.prototype.$f;X.prototype.import=function(a){Hk(this);a=new zk(this.c,a);return Ke(this.Ha,a).then(m(null))};X.prototype["import"]=X.prototype.import;function Y(a,b,c,d,e,f){this.S=a;this.w=b;this.Ue=c;this.Se=d;this.xf=e;this.Ja=f||null}t("lf.schema.BaseColumn",Y);n=Y.prototype;n.getName=h("w");n.j=function(){return Ud(this.S)+"."+this.w};n.toString=function(){return this.j()};n.H=h("S");n.F=h("xf");Y.prototype.getType=Y.prototype.F;Y.prototype.Ca=function(){null==this.sa&&(this.sa=[],this.H().Ca().forEach(function(a){-1!=a.f.map(function(b){return b.$.getName()}).indexOf(this.w)&&this.sa.push(a)},this));return this.sa};
Y.prototype.Ba=function(){if(!q(this.ea)){var a=this.Ca().filter(function(b){return 1!=b.f.length?!1:b.f[0].$.getName()==this.getName()},this);this.ea=0<a.length?a[0]:null}return this.ea};Y.prototype.fc=h("Se");Y.prototype.isNullable=Y.prototype.fc;Y.prototype.zc=h("Ue");Y.prototype.Na=function(a){return Wg(this,a,"eq")};Y.prototype.eq=Y.prototype.Na;Y.prototype.af=function(a){return Wg(this,a,"neq")};Y.prototype.neq=Y.prototype.af;Y.prototype.wg=function(a){return Wg(this,a,"lt")};
Y.prototype.lt=Y.prototype.wg;Y.prototype.xg=function(a){return Wg(this,a,"lte")};Y.prototype.lte=Y.prototype.xg;Y.prototype.dg=function(a){return Wg(this,a,"gt")};Y.prototype.gt=Y.prototype.dg;Y.prototype.eg=function(a){return Wg(this,a,"gte")};Y.prototype.gte=Y.prototype.eg;Y.prototype.match=function(a){return Wg(this,a,"match")};Y.prototype.match=Y.prototype.match;Y.prototype.Jf=function(a,b){return Wg(this,[a,b],"between")};Y.prototype.between=Y.prototype.Jf;
Y.prototype.fg=function(a){return Wg(this,a,"in")};Y.prototype["in"]=Y.prototype.fg;Y.prototype.qg=function(){return this.Na(null)};Y.prototype.isNull=Y.prototype.qg;Y.prototype.pg=function(){return this.af(null)};Y.prototype.isNotNull=Y.prototype.pg;Y.prototype.as=function(a){return new Y(this.S,this.w,this.Ue,this.Se,this.xf,a)};Y.prototype.as=Y.prototype.as;function Ik(a){this.g=a;this.Ed=new dd;this.je=new dd;this.cf=new dd;this.Ee=z();this.h=new dd;this.Ae=new dd;this.kf=new dd;this.De=new dd;Jk(this)}function Jk(a){a.g.oa().forEach(function(b){var c=b.getName();b.Kb.Qd.forEach(function(d){this.cf.set(c,this.g.table(d.Ta));this.h.set(d.Ta,b);0==d.action?(this.je.set(d.Ta,d),this.kf.set(d.Ta,b)):(this.Ed.set(d.Ta,d),this.Ae.set(d.Ta,b));this.Ee.set(b.getName()+"."+d.tb,d.Ta);this.De.set(d.Ta+"."+d.Fc,b.getName())},this)},a)}
function ld(a,b,c){if(null!=c)return 1==c?a.Ed.get(b):a.je.get(b);c=a.Ed.get(b);a=a.je.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Rh(a,b){a=b.get(a);return null===a?[]:a}function Th(a,b){var c=C();b.forEach(function(d){(d=this.Ee.get(d))&&c.add(d)},a);return D(c).map(function(d){return this.g.table(d)},a)}function Ph(a,b,c){return null!=c?0==c?Rh(b,a.kf):Rh(b,a.Ae):Rh(b,a.h)}
function Uh(a,b){var c=C();b.forEach(function(d){(d=this.De.get(d))&&d.forEach(function(e){c.add(e)})},a);return D(c).map(function(d){return this.g.table(d)},a)};function Kk(a,b,c){this.od=a;this.Ag=b;this.Qd=c}t("lf.schema.Constraint",Kk);Kk.prototype.cg=h("od");Kk.prototype.getPrimaryKey=Kk.prototype.cg;Kk.prototype.bg=h("Qd");Kk.prototype.getForeignKeys=Kk.prototype.bg;function Lk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new E(540,c);this.Ce=b;this.tb=a.local;this.Ta=d[0];this.Fc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Z(a){Mk(a);this.Md=fe();this.w=a;this.J=z();this.vd=C();this.mc=C();this.jd=C();this.Ea=null;this.sa=z();this.nd=!1;this.wb=[]}t("lf.schema.TableBuilder",Z);function Nk(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var Ok=C([0,6]);function Mk(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function Pk(a,b){if(b==a.w)throw new E(546,b);if(a.J.has(b)||a.sa.has(b)||a.mc.has(b))throw new E(503,a.w+"."+b);}
function Qk(a,b){var c=!1;b.forEach(function(d){var e=this.J.get(d.name);c=c||d.autoIncrement;if(d.autoIncrement&&3!=e)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function Rk(a){if(null!==a.Ea){var b=a.sa.get(a.Ea).map(function(d){return d.name}),c=0;if(a.wb.some(function(d,e){c=e;return-1!=b.indexOf(d.tb)},a))throw new E(543,a.wb[c].name);}}
function Sk(a){if(null!==a.Ea){var b=function(d){return d.name},c=JSON.stringify(a.sa.get(a.Ea).map(b));a.sa.forEach(function(d,e){if(e!=this.Ea&&(d=d.map(b),JSON.stringify(d)==c))throw new E(544,this.w+"."+e);},a)}}function Tk(a){null===a.Ea||a.sa.get(a.Ea).forEach(function(b){if(this.jd.has(b.name))throw new E(545,this.w+"."+b.name);},a)}Z.prototype.Cf=function(a,b){Mk(a);Pk(this,a);this.J.set(a,b);Ok.has(b)&&this.xe([a]);return this};Z.prototype.addColumn=Z.prototype.Cf;
Z.prototype.Ef=function(a,b){var c=this.w;this.Ea="pk"+(c[0].toUpperCase()+c.substring(1));Mk(this.Ea);Pk(this,this.Ea);a=Uk(this,a,!0,void 0,b);Qk(this,a);1==a.length&&this.vd.add(a[0].name);this.mc.add(this.Ea);this.sa.set(this.Ea,a);return this};Z.prototype.addPrimaryKey=Z.prototype.Ef;
Z.prototype.Df=function(a,b){Mk(a);Pk(this,a);b=new Lk(b,this.w,a);q(b.action)||(b.action=0);q(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new E(506);if(!this.J.has(b.tb))throw new E(540,a);this.wb.push(b);this.we(a,[b.tb],this.vd.has(b.tb));return this};Z.prototype.addForeignKey=Z.prototype.Df;Z.prototype.Ff=function(a,b){Mk(a);Pk(this,a);b=Uk(this,b,!0);1==b.length&&(this.vd.add(b[0].name),Vk(this,b[0].name));this.sa.set(a,b);this.mc.add(a);return this};Z.prototype.addUnique=Z.prototype.Ff;
function Vk(a,b){a.wb.forEach(function(c){c.tb==b&&this.mc.add(c.name.split(".")[1])},a)}Z.prototype.xe=function(a){Uk(this,a,!1).forEach(function(b){this.jd.add(b.name)},this);return this};Z.prototype.addNullable=Z.prototype.xe;Z.prototype.we=function(a,b,c,d){Mk(a);Pk(this,a);b=Uk(this,b,!0,d);c&&this.mc.add(a);this.sa.set(a,b);return this};Z.prototype.addIndex=Z.prototype.we;Z.prototype.Bb=ba("nd");Z.prototype.persistentIndex=Z.prototype.Bb;
Z.prototype.xb=function(){Rk(this);Sk(this);Tk(this);return new (Wk(this))};Z.prototype.getSchema=Z.prototype.xb;function Uk(a,b,c,d,e){var f=b;f="string"==typeof b[0]?b.map(function(g){return new Nk({name:g,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(g){return new Nk(g)});f.forEach(function(g){if(!this.J.has(g.name))throw new E(508,this.w,g.name);if(c){var k=this.J.get(g.name);if(0==k||6==k)throw new E(509,this.w,g.name);}},a);return f}
function Wk(a){function b(){function c(k){return a.sa.get(k).map(function(l){return{$:this[l.name],order:l.order,autoIncrement:l.autoIncrement}},this)}var d=nc(a.J).map(function(k){this[k]=new Y(this,k,a.vd.has(k),a.jd.has(k),a.J.get(k));return this[k]},this),e=nc(a.sa).map(function(k){return new Yg(a.w,k,a.mc.has(k),c.call(this,k))},this);Q.call(this,a.w,d,e,a.nd);var f=null===a.Ea?null:new Yg(a.w,a.Ea,!0,c.call(this,a.Ea)),g=d.filter(function(k){return!a.jd.has(k.getName())});this.Kb=new Kk(f,g,
a.wb);this.nf=Xk(a,d,e)}u(b,Q);b.prototype.vb=function(c){return new this.nf(pc++,c)};b.prototype.createRow=b.prototype.vb;b.prototype.ib=function(c){var d={};this.jb().forEach(function(e){var f=e.getName();e=e.F();var g=c.value[f];if(0==e)if(e=g,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);g=new ArrayBuffer(e.length/2);for(var k=new Uint8Array(g),l=0,p=0;l<e.length;l+=2)k[p++]=parseInt(e.substr(l,2),16);e=g}else e=null;else e=2==e?null!=g?new Date(g):null:g;d[f]=e},this);return new this.nf(c.id,d)};
b.prototype.deserializeRow=b.prototype.ib;b.prototype.Je=h("Kb");b.prototype.getConstraint=b.prototype.Je;return b}
function Xk(a,b,c){function d(k,l){this.J=b;this.sa=c;oc.call(this,k,l)}u(d,oc);d.prototype.Ge=function(){var k={};this.J.forEach(function(l){k[l.getName()]=l.fc()?null:cd[l.F()]});return k};d.prototype.vf=function(){var k={};this.J.forEach(function(l){var p=l.getName();l=l.F();var r=this.l[p];k[p]=0==l?null!=r?sc(r):null:2==l?null!=r?r.getTime():null:6==l?null!=r?r:null:r},this);return k};var e=function(k){var l=this.J.get(k.getName()),p=this.Md.Ve.get(l)||null;return function(r){return p(r[k.getName()])}}.bind(a),
f=function(k){var l=k.map(function(p){return e(p.$)});return function(p){return l.map(function(r){return r(p)})}}.bind(a),g={};c.forEach(function(k){var l=k.j();k=1==k.f.length?e(k.f[0].$):f(k.f);g[l]=k});d.prototype.lb=function(k){return-1!=k.indexOf("#")?this.id():g.hasOwnProperty(k)?g[k](this.l):null};return d};function Yk(a,b){this.g=new Zk(a,b);this.rb=z();this.vc=!1;this.i=null;this.Vc=!1}t("lf.schema.Builder",Yk);function $k(a,b){b.wb.forEach(function(c){var d=c.Ta;if(!this.rb.has(d))throw new E(536,c.name);d=this.rb.get(d).xb();var e=c.Fc;if(!d.hasOwnProperty(e))throw new E(537,c.name);if(b.xb()[c.tb].F()!=d[e].F())throw new E(538,c.name);if(!d[e].zc())throw new E(539,c.name);},a)}
Yk.prototype.Nf=function(a){a.wb.forEach(function(b){this.rb.get(b.Ta).wb.forEach(function(c){if(c.tb==b.Fc)throw new E(534,b.name);},this)},this)};function al(a){a.vc||(a.rb.forEach(function(b){$k(this,b);b=b.xb();this.g.L.set(b.getName(),b)},a),A(a.rb).forEach(a.Nf,a),bl(a),a.rb.clear(),a.vc=!0)}function cl(a,b,c){b.te||(b.te=!0,b.ae=!0,b.He.forEach(function(d){d=c.get(d);if(!d.te)cl(this,d,c);else if(d.ae&&b!=d)throw new E(533);},a));b.ae=!1}
function bl(a){var b=z();a.g.L.forEach(function(c,d){b.set(d,new dl(d))},a);a.rb.forEach(function(c,d){c.wb.forEach(function(e){b.get(e.Ta).He.add(d)})});A(b).forEach(function(c){cl(this,c,b)},a)}function dl(a){this.ae=this.te=!1;this.He=C();this.kc=a}Yk.prototype.xb=function(){this.vc||al(this);return this.g};Yk.prototype.getSchema=Yk.prototype.xb;Yk.prototype.Me=function(){var a=new Bc("ns_"+this.g.name()),b=hk();if(b.hd(a))var c=b.b(a);else c=new fk,b.pb(a,c);return c};Yk.prototype.getGlobal=Yk.prototype.Me;
Yk.prototype.connect=function(a){if(this.Vc||null!==this.i&&this.i.ed)throw new E(113);this.Vc=!0;if(null===this.i){var b=this.Me();b.hd(Ic)||b.pb(Ic,this.xb());this.i=new X(b)}return this.i.Da(a).then(function(c){this.Vc=!1;return c}.bind(this),function(c){this.Vc=!1;this.i.close();throw c;}.bind(this))};Yk.prototype.connect=Yk.prototype.connect;Yk.prototype.Pf=function(a){if(this.rb.has(a))throw new E(503,a);if(this.vc)throw new E(535);this.rb.set(a,new Z(a));return this.rb.get(a)};
Yk.prototype.createTable=Yk.prototype.Pf;Yk.prototype.ne=function(a){if(this.vc)throw new E(535);this.g.ne(a);return this};Yk.prototype.setPragma=Yk.prototype.ne;function Zk(a,b){this.w=a;this.Yb=b;this.L=z();this.fe={Vf:!1}}t("lf.schema.DatabaseSchema",Zk);Zk.prototype.name=h("w");Zk.prototype.name=Zk.prototype.name;Zk.prototype.version=h("Yb");Zk.prototype.version=Zk.prototype.version;Zk.prototype.oa=function(){return A(this.L)};Zk.prototype.tables=Zk.prototype.oa;
Zk.prototype.table=function(a){if(!this.L.has(a))throw new E(101,a);return this.L.get(a)};Zk.prototype.table=Zk.prototype.table;Zk.prototype.info=function(){this.Re||(this.Re=new Ik(this));return this.Re};Zk.prototype.Ig=h("fe");Zk.prototype.pragma=Zk.prototype.Ig;Zk.prototype.ne=ba("fe");t("lf.schema.create",function(a,b){return new Yk(a,b)});w.prototype.catch=w.prototype.qe;w.prototype["catch"]=w.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))();
//# sourceMappingURL=lovefield.es6.js.map
